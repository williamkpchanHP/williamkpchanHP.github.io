<base target="_blank"><html><head><title>Quick Start with PhantomJS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="https://williamkpchan.github.io/lazyload.min.js"></script>
<script type='text/javascript' src='https://williamkpchan.github.io/mainscript.js'></script>
<script src="https://williamkpchan.github.io/commonfunctions.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>

<script>
  var showTopicNumber = false;
  var topicEnd = "<br>";
  var bookid = "Quick Start with PhantomJS"
  var markerName = "h2"
$(document).ready(function(){
   $('h1, h2, h3, h4, h4, h6, .exp, b').click(function(){
   parent.history.back();
   return false;
   });
});

</script>
<style>
body{width:80%;margin-left: 10%; font-size:22px;}
h1, h2 {color: gold;}
strong {color: orange;}
pre{width:100%;}
#toc{color:cyan; font-size:20px;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px; background-color:#044;}
.stop-scrolling { height: 100%; overflow: hidden; }
iframe {width:100%; height:100%;}
</style></head><body onkeypress="chkKey()"><center>
<h1>Quick Start with PhantomJS</h1>
<a href="#mustWatch" class="red goldbs" target="_self">Must Watch!</a>
<br><br>
<div id="toc"></div></center>
<br><br>
<div id="mustWatch"><center><span class="red">MustWatch</span></center><br>
</div>

<br>
<br>
<h1>Quick Start with PhantomJS</h1>
https://phantomjs.org/quick-start.html

<h2>Hello, World!</h2>
Create a new text file that contains the following two lines:
console.log('Hello, world!');
phantom.exit();

Save it as <code>hello.js</code> and then run it from the terminal or command prompt:

phantomjs hello.js
The output is:
Hello, world!

In the first line, <code>console.log</code> will print the passed string to the terminal. In the second line, <code>phantom.exit</code> terminates the execution.
It is <strong>very important</strong> to call <code>phantom.exit</code> at some point in the script, otherwise PhantomJS will not be terminated at all.

<h2>Page Loading</h2>
A web page can be loaded, analyzed, and rendered by creating a <code>webpage</code> object.
The following script demonstrates the simplest use of page object. It loads <code>example.com</code> and then saves it as an image, <code>example.png</code> in the same directory the script was run in.

var page = require('webpage').create();
page.open('http://example.com', function(status) {
  console.log("Status: " + status);
  if(status === "success") {
    page.render('example.png');
  }
  phantom.exit();
});

Because of its rendering features, PhantomJS can be used to <a href="/screen-capture.html">capture web pages</a>, essentially taking a screenshot of the contents.

The following <code>loadspeed.js</code> script loads a specified URL (do not forget the <code>http</code> protocol) and measures the time it takes to load it.

var page = require('webpage').create(),
  system = require('system'),
  t, address;

if (system.args.length === 1) {
  console.log('Usage: loadspeed.js [some URL]');
  phantom.exit();
}

t = Date.now();
address = system.args[1];
page.open(address, function(status) {
  if (status !== 'success') {
    console.log('FAIL to load the address');
  } else {
    t = Date.now() - t;
    console.log('Loading ' + system.args[1]);
    console.log('Loading time ' + t + ' msec');
  }
  phantom.exit();
});

Run the script with the command:

phantomjs loadspeed.js http://www.google.com
It outputs something like:
Loading http://www.google.com
Loading time 719 msec

<h2>Code Evaluation</h2>
To evaluate JavaScript code in the context of the web page, use <code>evaluate()</code> function. The execution is "sandboxed", there is no way for the code to access any JavaScript objects and variables outside its own page context. An object can be returned from <code>evaluate()</code>, however it is limited to simple objects and can’t contain functions or closures.
Here is an example to show the title of a web page:

var page = require('webpage').create();
page.open(url, function(status) {
  var title = page.evaluate(function() {
    return document.title;
  });
  console.log('Page title is ' + title);
  phantom.exit();
});

Any console message from a web page, including from the code inside <code>evaluate()</code>, will not be displayed by default. To override this behavior, use the <code>onConsoleMessage</code> callback. The previous example can be rewritten to:

var page = require('webpage').create();
page.onConsoleMessage = function(msg) {
  console.log('Page title is ' + msg);
};
page.open(url, function(status) {
  page.evaluate(function() {
    console.log(document.title);
  });
  phantom.exit();
});

Since the script is executed as if it is running on a web browser, standard DOM scripting and CSS selectors work just fine. It makes PhantomJS suitable to carry out various <a href="/page-automation.html">page automation</a> tasks.

<h2>Further Study</h2>
The code shown above is also available in <a href="/examples/">various examples</a> included with PhantomJS.
You are also recommended to explore the use of PhantomJS for <a href="/page-automation.html">page automation</a>, <a href="/network-monitoring.html">network monitoring</a>, <a href="/screen-capture.html">screen capture</a>, and <a href="/headless-testing.html">headless testing</a>.

<h2><span class="orange">Page Automation with PhantomJS</span></h2>
Because PhantomJS can load and manipulate a web page, it is perfect to carry out various page automation tasks.

<h2>DOM Manipulation</h2>
Since the script is executed as if it is running on a web browser, standard <a href="http://en.wikipedia.org/wiki/DOM_scripting">DOM scripting</a> and <a href="http://www.w3.org/TR/css3-selectors/">CSS selectors</a> work just fine.

The following <code>useragent.js</code> example demonstrates reading the <code>textContent</code> property of the element whose <em>id</em> is <code>qua</code>:
var page = require('webpage').create();
console.log('The default user agent is ' + page.settings.userAgent);
page.settings.userAgent = 'SpecialAgent';
page.open('http://www.httpuseragent.org', function(status) {
  if (status !== 'success') {
    console.log('Unable to access network');
  } else {
    var ua = page.evaluate(function() {
      return document.getElementById('qua').textContent;
    });
    console.log(ua);
  }
  phantom.exit();
});

The above example also shows the approach to customize the <a href="https://stackoverflow.com/questions/2601372
">User-Agent string</a> seen by the remote web server.

<h2>Use jQuery and Other Libraries</h2>
As of version 1.6, you are also able to include <a href="http://jquery.com">jQuery</a> into your page using <code>page.includeJs</code> as follows:

var page = require('webpage').create();
page.open('http://www.sample.com', function() {
  page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", function() {
    page.evaluate(function() {
      $("button").click();
    });
    phantom.exit()
  });
});

The above snippet will open up a web page, include the jQuery library into the page, and then click on all buttons using jQuery. It will then exit from the web page.
Make sure to put the <code>phantom.exit()</code> statement within the <code>page.includeJs</code> or else it may exit prematurely before the JavaScript library is included.

<h2>The Webpage instance</h2>
Suppose you have an instance of the webpage:
var page = require('webpage').create();
What can be extracted and executed on it?

<h3>Attributes</h3>
<h4>page.canGoForward -&gt; boolean</h4>
If window.history.forward would be a valid action
<h4>page.canGoBack -&gt; boolean</h4>
If window.history.back would be a valid action
<h4>page.clipRect -&gt; object</h4>
Can be set to an object of the following form:
{ top: 0, left: 0, width: 1024, height: 768 }
It specifies which part of the screen will be taken in the screenshot
<h4>page.content -&gt; string</h4>
The whole HTML content of the page
<h4>page.cookies -&gt; object</h4>
The cookies.
They have this form:
{ 'name' : 'Valid-Cookie-Name',
  'value' : 'Valid-Cookie-Value',
  'domain' : 'localhost',
  'path' : '/foo',
  'httponly' : true,
  'secure' : false
}

<h4>page.customHeaders -&gt; object</h4>
TODO
<h4>page.event -&gt; object</h4>
Contains modifiers and keys
TODO
<h4>page.libraryPath -&gt; string</h4>
The current library path, usually it’s the directory where the script
is executed from
<h4>page.loading -&gt; boolean</h4>
If the page is loading or not
<h4>page.loadingProgress -&gt; number</h4>
The percentage that has been loaded. 100 means that the page is loaded.
<h4>page.navigationLocked -&gt; boolean</h4>
TODO
<h4>page.offlineStoragePath -&gt; string</h4>
Where the sqlite3 localstorage and other offline data are stored.
<h4>page.offlineStorageQuota, ‘number</h4>
The quota in bytes that can be stored offline
<h4>page.paperSize -&gt; object</h4>
Similar to clipRect but takes real paper sizes such as A4.
For an in depth example, check this example: <a href="https://github.com/ariya/phantomjs/blob/master/examples/printheaderfooter.js">printheaderfooter.js</a>.
<h4>page.plainText -&gt; string</h4>
The elements that are plain text in the page
<h4>page.scrollPosition -&gt; object</h4>
The current scrolling position as an object of the following form:
{ left: 0, top: 0 }
<h4>page.settings -&gt; object</h4>
The settings which currently only has the <code>useragent</code> string, e.g <code>page.settings.userAgent = 'SpecialAgent'</code>;
<h4>page.title -&gt; string</h4>
The page title
<h4>page.url -&gt; string</h4>
The page url
<h4>page.viewportSize -&gt; object</h4>
The browser size which is in the following form:
{ width: 1024, height: 768 }
<h4>page.windowName -&gt; string</h4>
The name of the browser window that is assigned by the WM.
<h4>page.zoomFactor -&gt; number</h4>
The zoom factor. 1 is the normal zoom.

<h3>Functions</h3>
  <li>page.childFramesCount</li>
  <li>page.childFramesName</li>
  <li>page.close</li>
  <li>page.currentFrameName</li>
  <li>page.deleteLater</li>
  <li>page.destroyed</li>
  <li>page.evaluate</li>
  <li>page.initialized</li>
  <li>page.injectJs</li>
  <li>page.javaScriptAlertSent</li>
  <li>page.javaScriptConsoleMessageSent</li>
  <li>page.loadFinished</li>
  <li>page.loadStarted</li>
  <li>page.openUrl</li>
  <li>page.release</li>
  <li>page.render</li>
  <li>page.resourceError</li>
  <li>page.resourceReceived</li>
  <li>page.resourceRequested</li>
  <li>page.uploadFile</li>
  <li>page.sendEvent</li>
  <li>page.setContent</li>
  <li>page.switchToChildFrame</li>
  <li>page.switchToMainFrame</li>
  <li>page.switchToParentFrame</li>
  <li>page.addCookie</li>
  <li>page.deleteCookie</li>
  <li>page.clearCookies</li>

<h3>Handlers/Callbacks</h3>
List of all the page events:
  <li>onInitialized</li>
  <li>onLoadStarted</li>
  <li>onLoadFinished</li>
  <li>onUrlChanged</li>
  <li>onNavigationRequested</li>
  <li>onRepaintRequested</li>
  <li>onResourceRequested</li>
  <li>onResourceReceived</li>
  <li>onResourceError</li>
  <li>onResourceTimeout</li>
  <li>onAlert</li>
  <li>onConsoleMessage</li>
  <li>onClosing</li>
For more information check this in depth example: <a href="https://github.com/ariya/phantomjs/blob/master/examples/page_events.js">page_event.js</a>.

<h2><span class="orange">Example Scripts for PhantomJS</span></h2>
PhantomJS comes with a lot of <a href="https://github.com/ariya/phantomjs/tree/master/examples">included examples</a>.

<h2>Basic examples</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/arguments.js">arguments.js</a> shows the arguments passed to the script</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/countdown.js">countdown.js</a> prints a 10 second countdown</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/echoToFile.js">echoToFile.js</a> writes the command line arguments to a file</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/fibo.js">fibo.js</a> lists the first few numbers in the Fibonacci sequence</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/hello.js">hello.js</a> displays the famous message</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/module.js">module.js</a> and <code>universe.js</code> demonstrate the use of module system</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/outputEncoding.js">outputEncoding.js</a> displays a string in various encodings</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/printenv.js">printenv.js</a> displays the system’s environment variables</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/scandir.js">scandir.js</a> lists all files in a directory and its subdirectories</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/sleepsort.js">sleepsort.js</a> sorts integers and delays display depending on their values</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/version.js">version.js</a> prints out PhantomJS version number</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/page_events.js">page_events.js</a> prints out page events firing: useful to better grasp <code>page.on*</code> callbacks</li>

<h2>Rendering/rasterization</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/colorwheel.js">colorwheel.js</a> creates a color wheel using HTML5 canvas</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js">rasterize.js</a> rasterizes a web page to image or PDF</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/render_multi_url.js">render_multi_url.js</a> renders multiple web pages to images</li>

<h2>Page automation</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/injectme.js">injectme.js</a> injects itself into a web page context</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/phantomwebintro.js">phantomwebintro.js</a> uses jQuery to read .version element text from phantomjs.org</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/unrandomize.js">unrandomize.js</a> modifies a global object at page initialization</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js">waitfor.js</a> waits until a test condition is true or a timeout occurs</li>

<h2>Network</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/detectsniff.js">detectsniff.js</a> detects if a web page sniffs the user agent</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/loadspeed.js">loadspeed.js</a> computes the loading speed of a web site</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/netlog.js">netlog.js</a> dumps all network requests and responses</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/netsniff.js">netsniff.js</a> captures network traffic in HAR format</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/post.js">post.js</a> sends an HTTP POST request to a test server</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/postserver.js">postserver.js</a> starts a web server and sends an HTTP POST request to it</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/server.js">server.js</a> starts a web server and sends an HTTP GET request to it</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/serverkeepalive.js">serverkeepalive.js</a> starts a web server which answers in plain text</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/simpleserver.js">simpleserver.js</a> starts a web server which answers in HTML</li>

<h2>Testing</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/run-jasmine.js">run-jasmine.js</a> runs Jasmine based tests</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/run-qunit.js">run-qunit.js</a> runs QUnit based tests</li>

<h2>Browser</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/features.js">features.js</a> detects browser features using <code>modernizr.js</code></li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/useragent.js">useragent.js</a> changes the browser’s user agent property</li>

<h2><span class="orange">Headless Testing with PhantomJS</span></h2>
One major use case of PhantomJS is <strong>headless testing</strong> of web applications. It is suitable for general command-line based testing, within a precommit hook, and as part of a continuous integration system.

<h2>Test Frameworks</h2>
PhantomJS itself is <strong>not</strong> a test framework, it is only used to launch the tests via a suitable test runner.
The following table summarizes the list of various test frameworks and the corresponding test runners. If the framework does not need an external/third-party runner, it is marked as “built-in”.

<table>
  <thead>
    <tr><th style="text-align: left">Framework</th><th style="text-align: left">Test Runner</th></tr></thead>
  <tbody>
    <tr><td style="text-align: left"><a href="http://busterjs.org">Buster.JS</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://teamcapybara.github.io/capybara/">Capybara</a></td><td style="text-align: left"><a href="https://github.com/jonleighton/poltergeist">Poltergeist</a>, <a href="http://terminus.jcoglan.com">Terminus</a></td></tr>
    <tr><td style="text-align: left"><a href="http://mochajs.org">Mocha</a></td><td style="text-align: left"><a href="http://mmanela.github.io/chutzpah/">Chutzpah</a>, <a href="https://github.com/nathanboktae/mocha-phantomjs">mocha-phantomjs</a></td></tr>
    <tr><td style="text-align: left"><a href="http://funcunit.com">FuncUnit</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://hirojs.com">Hiro</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://karma-runner.github.com/">Karma</a> (née Testacular)</td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="https://github.com/pivotal/jasmine">Jasmine</a></td><td style="text-align: left"><a href="http://mmanela.github.io/chutzpah/">Chutzpah</a>, <a href="https://github.com/gruntjs/grunt-contrib-jasmine">grunt-contrib-jasmine</a>, <a href="https://github.com/netzpirat/guard-jasmine">guard-jasmine</a>, <a href="https://github.com/jcarver989/phantom-jasmine">phantom-jasmine</a></td></tr>
    <tr><td style="text-align: left"><a href="http://arunoda.github.io/laika/">Laika</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://jeffschwartz.github.io/preamble/">Preamble</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="https://bitbucket.org/eradman/phantom-assert">phantom-assert</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://qunitjs.com">QUnit</a></td><td style="text-align: left"><a href="https://github.com/jonkemp/qunit-phantomjs-runner">qunit-phantomjs-runner</a>, <a href="http://mmanela.github.io/chutzpah/">Chutzpah</a>, <a href="https://github.com/proxv/qlive">Qlive</a>, <a href="http://github.com/aaronroyer/qunited">QUnited</a></td></tr>
    <tr><td style="text-align: left"><a href="http://code.google.com/p/robotframework/">Robot Framework</a></td><td style="text-align: left"><a href="https://github.com/datakurre/phantomrobot">phantomrobot</a></td></tr>
    <tr><td style="text-align: left"><a href="https://github.com/gizur/rxtestrunner">Rx Test Runner</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="https://github.com/juliangruber/tape-run">tape-run</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="https://github.com/airportyh/testem">Testem</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://www.venusjs.org/">Venus.js</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://dvcs.w3.org/hg/webdriver/raw-file/tip/webdriver-spec.html">WebDriver</a></td><td style="text-align: left"><a href="https://github.com/detro/ghostdriver">GhostDriver</a></td></tr>
    <tr><td style="text-align: left"><a href="https://github.com/WebReflection/wru">wru</a></td><td style="text-align: left">built-in</td></tr>
    <tr><td style="text-align: left"><a href="http://yuilibrary.com/projects/yuitest">YUITest</a></td><td style="text-align: left"><a href="https://github.com/davglass/grover">Grover</a>, <a href="https://github.com/metafeather/phantomjs-yuitest">phantomjs-yuitest</a></td></tr>
  </tbody>
</table>
PhantomJS includes <a href="https://github.com/ariya/phantomjs/blob/master/examples/run-qunit.js">run-qunit</a> and <a href="https://github.com/ariya/phantomjs/blob/master/examples/run-jasmine.js">run-jasmine</a> in its <code>examples</code> subdirectory. However, these are for illustration purposes and lack important reporting features necessary for real-world uses!
<h2>PhantomJS tailored testing</h2>
In addition, there are <a href="http://phantomjs.org/related-projects.html">Related Projects</a> which are built on top of PhantomJS to provide convenient high-level functionality for testing purposes:
  <li><a href="http://casperjs.org">Casper.js</a> is useful to build scripted navigation and testing</li>
  <li><a href="https://github.com/StanAngeloff/lotte">Lotte</a> adds jQuery-like methods, chaining, and more assertion logic</li>
  <li><a href="https://github.com/jgonera/webspecter">WebSpecter</a> is a BDD-style acceptance test framework for web applications</li>
<h2>Continuous Integration Systems</h2>
Using PhantomJS with CI system such as <strong><a href="http://jenkins-ci.org/">Jenkins</a></strong> or <strong><a href="http://www.jetbrains.com/teamcity/">TeamCity</a></strong> does not require special setup. Make sure PhantomJS is installed properly on the slave/build agent and it is ready to go.

Since PhantomJS is purely headless on Linux, the agent can run on an installation without any GUI. This means, a barebone Linux system without X11 is not a problem for PhantomJS. It makes it possible to spawn light build agents on Amazon EC2 or Heroku instances.

<strong><a href="http://about.travis-ci.org/">Travis CI</a></strong>, a popular hosted CI system, has built-in support for PhantomJS. See <a href="http://docs.travis-ci.com/user/gui-and-headless-browsers/#Using-PhantomJS">its documentation</a> for details.

<h2><span class="orange">Screen Capture with PhantomJS</span></h2>
Since PhantomJS is using WebKit, a real layout and rendering engine, it can capture a web page as a screenshot. Because PhantomJS can render anything on the web page, it can be used to convert HTML content styled with CSS but also SVG, images and Canvas elements.
The following script demonstrates the simplest use of page capture. It loads the GitHub homepage and then saves it as an image, <code>github.png</code>.

var page = require('webpage').create();
page.open('http://github.com/', function() {
  page.render('github.png');
  phantom.exit();
});


To run this example create a new file called <code>github.js</code>. Copy and paste the above code into the <code>github.js</code> file. In the command line, run this newly created script with PhantomJS:
phantomjs github.js
Beside PNG format, PhantomJS supports JPEG, GIF, and PDF.

In the <code>examples</code> subdirectory, there is a script <a href="https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js">rasterize.js</a> which demonstrates a more complete rendering feature of PhantomJS. An example to produce the rendering of the famous Tiger (from SVG):

phantomjs rasterize.js http://ariya.github.io/svg/tiger.svg tiger.png
which gives the following <code>tiger.png</code>:
<img src="http://lh6.ggpht.com/_Oijhf1ZPv-4/TR6iM8J0KrI/AAAAAAAABy4/RCZ8Eg567LM/s400/tiger.png" alt="Rendered Tiger" />

Another example is to show <a href="https://dmitrybaranovskiy.github.io/raphael/polar-clock.html">polar clock</a> (from <a href="https://dmitrybaranovskiy.github.io/raphael/">RaphaelJS</a>):
phantomjs rasterize.js https://dmitrybaranovskiy.github.io/raphael/polar-clock.html clock.png

<img src="https://lh5.googleusercontent.com/_Oijhf1ZPv-4/TUuUx1o-tuI/AAAAAAAAB00/Ba-Gxl5Zp6Q/s288/polar-clock.png" alt="Polar Clock" />

Producing PDF output is also easy, such as from a Wikipedia article:
phantomjs rasterize.js 'http://en.wikipedia.org/w/index.php?title=Jakarta&printable=yes' jakarta.pdf

You can change the size of the screenshot and the webpage using the page’s attributes:
  var page = require('webpage').create();
  //viewportSize being the actual size of the headless browser
  page.viewportSize = { width: 1024, height: 768 };
  //the clipRect is the portion of the page you are taking a screenshot of
  page.clipRect = { top: 0, left: 0, width: 1024, height: 768 };
  //the rest of the code is the same as the previous example
  page.open('http://example.com/', function() {
    page.render('github.png');
    phantom.exit();
  });


Canvas can be easily constructed and converted to an image. The included example <a href="https://github.com/ariya/phantomjs/blob/master/examples/colorwheel.js">colorwheel.js</a> produces the following color wheel:

<img src="https://lh3.googleusercontent.com/-xSIzxPtJULw/TVzeP4NPMDI/AAAAAAAAB10/k-c8jB6I5Cg/s288/colorwheel.png" alt="Color Wheel" />

It is possible to build a web screenshot service using PhantomJS. Some <a href="http://phantomjs.org/related-projects.html">related projects</a> make it easy to create such a service.

<h2><span class="orange">Network Monitoring with PhantomJS</span></h2>
Because PhantomJS permits the inspection of network traffic, it is suitable to build various analysis on the network behavior and performance.

All the resource requests and responses can be sniffed using <code>onResourceRequested</code> and <code>onResourceReceived</code>. A very simple example to log every request and response is illustrated in the script <a href="https://github.com/ariya/phantomjs/blob/master/examples/netlog.js">netlog.js</a>:


var page = require('webpage').create();
page.onResourceRequested = function(request) {
  console.log('Request ' + JSON.stringify(request, undefined, 4));
};
page.onResourceReceived = function(response) {
  console.log('Receive ' + JSON.stringify(response, undefined, 4));
};
page.open(url);


By collecting the data and reformatting it, another example, <a href="https://github.com/ariya/phantomjs/blob/master/examples/netsniff.js">netsniff.js</a>, exports the network traffic in <a href="http://www.softwareishard.com/blog/har-12-spec">HAR format</a>. Use <a href="http://www.softwareishard.com/blog/har-viewer">HAR viewer</a> to visualize the result and get the waterfall diagram.

The following shows an examplary waterfall diagram obtained from BBC website:

<img src="https://lh6.googleusercontent.com/-xoooH5EB6EE/TgnyJ3r9sRI/AAAAAAAAB98/wYJ_VoWED34/s640/bbc-har.png" alt="Waterfall Diagram" />

For more advanced network analysis, see projects like <a href="https://github.com/jamesgpearce/confess">Confess.js</a> and <a href="http://yslow.org">YSlow</a>.

The <a href="http://yslow.org/phantomjs/">integration</a> of YSlow and PhantomJS is very useful for automated web performance. The report can be in TAP (Test Anything Protocol) and JUnit. Running YSlow with PhantomJS in a continuous integration system such as Jenkins is an easy DIY solution to performance monitoring:

<img src="http://i.imgur.com/PTD6j.png" alt="YSlow and Jenkins" />

<h2><span class="orange">PhantomJS - Frequently Asked Questions (FAQ)</span></h2>
<strong>Q: Why there is no binary package or installer for &lt;insert your favorite OS&gt;?</strong>

A: <a href="/download.html">Binary packages</a>, executables, and installer are provided on a volunteer basis.
They may appear later, or they may not exist at all. We are a very small team and we
can’t afford to produce all possible combinations of packages for the different
platforms and operating systems out there.

<strong>Q: Why does building PhantomJS take a long time?</strong>

A: Because PhantomJS build workflow bundles the WebKit module, it needs to compile
thousands of source files. Using the binary package is highly recommended.
It is fast to download and <a href="/download.html">easy to install</a>.

<strong>Q: Can you give a time estimate of the availability of feature X?</strong>

Because nobody is working full time on PhantomJS, there is no way to
predict the exact timing of the completion of a particular feature.
Since every contributor to PhantomJS works at their own pace, sometimes it can
take a few release cycles until a certain feature is shipped.

<strong>Q: Is there any update on issue XYZ??</strong>

Any progress related to an issue, whether it is a change in the plan
or an implementation check-in, will be always posted to the issue
page. This is part of PhantomJS contribution guide, it is essential to
the development workflow. If an issue hasn’t received any new update
for a while, a question like &quot;Is there any update?&quot; has an obvious
answer.

<strong>Q: Why do I get build failure with PhantomJS 1.5 after successfully
compiled 1.4?</strong>

A: PhantomJS has a completely different build workflow in version 1.5 compared to
its previous versions (read <a href="http://ariya.ofilabs.com/2012/03/the-evolution-of-phantomjs-build-workflow.html">the details</a>). If the working directory still has some left-over
from 1.4 build process, there will be a compile error, such as:

phantom.cpp:305: error: no matching function for call to 'QWebFrame::evaluateJavaScript(QString, QString)

The solution is to completely clean the directory from old build files. The
recommended way is to run <tt>git clean -xfd</tt> from the top-level.
<strong>Warning</strong>: this will remove everything not stored in the Git
repository database (read Git documentation for more info). Please back-up any files
appropriately.

After that, run the build script again.

<strong>Q: Why do I get the error message <tt>phantomjs: cannot connect to X
server</tt>?</strong>

A: In PhantomJS 1.4 or earlier, X server is still needed. The workaround is to use Xvfb.
Starting with PhantomJS 1.5, it is <strong>pure headless</strong> and there is no need to
run X11/Xvfb anymore.

<strong>Q: Which WebKit version is used by PhantomJS?</strong>

A: If you want to know HTML5/CSS3/other features supported by PhantomJS, using
WebKit version is not a good idea. See <a href="http://phantomjs.org/supported-web-standards.html">Supported Web Standards </a> documentation page for details.

If you really like to get the WebKit version, find it via the user agent, run the
<tt>examples/useragent.js</tt>. The actual version depends on the libraries with
which PhantomJS was compiled.

<strong>Q: Why is PhantomJS not written as Node.js module?</strong>

A: The short answer: &quot;No one can serve two masters.&quot;

A longer explanation is as follows.

As of now, it is technically very challenging to do so.

Every Node.js module is essentially &quot;a slave&quot; to the core of Node.js, i.e. “the
master”. In its current state, PhantomJS (and its included WebKit) needs to have the
full control (in a synchronous matter) over everything: event loop, network stack,
and JavaScript execution.

If the intention is just about using PhantomJS right from a script running within
Node.js, such a &quot;loose binding&quot; can be achieved by launching a PhantomJS process and
interact with it.

<strong>Q: When using <code>render()</code>, why is the background transparent?</strong>

A: PhantomJS does not set the background color of the web page at all, it is left
to the page to decide its background color. If the page does not set anything, then
it remains transparent.

To set an initial background color for a web page, use the following trick:


page.evaluate(function() {
    document.body.bgColor = 'white';
});


<h2><span class="orange">Example Scripts for PhantomJS</span></h2>
PhantomJS comes with a lot of <a href="https://github.com/ariya/phantomjs/tree/master/examples">included examples</a>.

<h2>Basic examples</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/arguments.js">arguments.js</a> shows the arguments passed to the script</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/countdown.js">countdown.js</a> prints a 10 second countdown</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/echoToFile.js">echoToFile.js</a> writes the command line arguments to a file</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/fibo.js">fibo.js</a> lists the first few numbers in the Fibonacci sequence</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/hello.js">hello.js</a> displays the famous message</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/module.js">module.js</a> and <code>universe.js</code> demonstrate the use of module system</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/outputEncoding.js">outputEncoding.js</a> displays a string in various encodings</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/printenv.js">printenv.js</a> displays the system’s environment variables</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/scandir.js">scandir.js</a> lists all files in a directory and its subdirectories</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/sleepsort.js">sleepsort.js</a> sorts integers and delays display depending on their values</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/version.js">version.js</a> prints out PhantomJS version number</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/page_events.js">page_events.js</a> prints out page events firing: useful to better grasp <code>page.on*</code> callbacks</li>
<h2>Rendering/rasterization</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/colorwheel.js">colorwheel.js</a> creates a color wheel using HTML5 canvas</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js">rasterize.js</a> rasterizes a web page to image or PDF</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/render_multi_url.js">render_multi_url.js</a> renders multiple web pages to images</li>
<h2>Page automation</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/injectme.js">injectme.js</a> injects itself into a web page context</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/phantomwebintro.js">phantomwebintro.js</a> uses jQuery to read .version element text from phantomjs.org</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/unrandomize.js">unrandomize.js</a> modifies a global object at page initialization</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js">waitfor.js</a> waits until a test condition is true or a timeout occurs</li>
<h2>Network</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/detectsniff.js">detectsniff.js</a> detects if a web page sniffs the user agent</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/loadspeed.js">loadspeed.js</a> computes the loading speed of a web site</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/netlog.js">netlog.js</a> dumps all network requests and responses</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/netsniff.js">netsniff.js</a> captures network traffic in HAR format</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/post.js">post.js</a> sends an HTTP POST request to a test server</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/postserver.js">postserver.js</a> starts a web server and sends an HTTP POST request to it</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/server.js">server.js</a> starts a web server and sends an HTTP GET request to it</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/serverkeepalive.js">serverkeepalive.js</a> starts a web server which answers in plain text</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/simpleserver.js">simpleserver.js</a> starts a web server which answers in HTML</li>
<h2>Testing</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/run-jasmine.js">run-jasmine.js</a> runs Jasmine based tests</li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/run-qunit.js">run-qunit.js</a> runs QUnit based tests</li>
<h2>Browser</h2>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/features.js">features.js</a> detects browser features using <code>modernizr.js</code></li>
  <li><a href="https://github.com/ariya/phantomjs/blob/master/examples/useragent.js">useragent.js</a> changes the browser’s user agent property</li>
</ul>
        

<a href="https://github.com/ariya/phantomjs">Source Code</a>
<a href="https://phantomjs.org/api">API</a>
<a href="https://phantomjs.org/examples">Examples</a>
<a href="https://phantomjs.org/faq">F.A.Q</a>

    <li><a href="https://phantomjs.org/api/command-line.html">Command Line Interface</a></li>
    <li><a href="https://phantomjs.org/api/phantom/">phantom Object</a></li>
    <li><a href="https://phantomjs.org/api/webpage/">Web Page Module</a></li>
    <li><a href="https://phantomjs.org/api/child_process/">Child Process Module</a></li>
    <li><a href="https://phantomjs.org/api/fs/">File System Module</a></li>
    <li><a href="https://phantomjs.org/api/system/">System Module</a></li>
    <li><a href="https://phantomjs.org/api/webserver/">Web Server Module</a></li>

<h2><span class="orange">PhantomJS Tutorial</span></h2>
PhantomJS is a lightweight headless browser built on WebKit. It is called headless because the execution does not happen on the browser, but on the terminal. This tutorial covers most of the topics required for a basic understanding of PhantomJS. Additionally, this tutorial also explains how to deal with its various components and to get a feel of how it works.

<b>PhantomJS</b> is said to be a <b>headless browser</b> because there is no involvement of browser while executing the JavaScript code. The execution will not be seen in the browser display, but on the command line prompt. The functionalities like <b>CSS Handling, DOM Manipulation, JSON, Ajax, Canvas, SVG,</b> etc., will all be taken care at the command prompt. PhantomJS does not have a GUI and hence, all its execution takes place at the command line.
Using PhantomJS, we can write to a file, read the contents of the file or upload a file, take an screen capture, convert the webpage into a pdf and lots more. With headless browsers, you get all the browser behavior i.e. <b>Cookies, Http Request Methods</b> i.e. <b>GET /POST, Clearing Cookies, Deleting Cookies</b>, etc., <b>Reloading of Page, Navigating to a Different Page</b>.
PhantomJS uses WebKit that has a similar browsing environment like the famous browsers 鈥&lt;93&gt; Google Chrome, Mozilla Firefox, Safari, etc. It also provides a lot of JavaScript API, which helps in taking screenshots, uploading of file, writing to file, reading a file, interacting with the web pages, etc.
PhantomJS does not support Flash or Video, as it requires plugins and it is difficult to support the same on the command line.
<h2>Features of PhantomJS</h2>
Let us now understand the features that PhantomJS offers.
<h3>Page Automation</h3>
PhantomJS allows you to read the page contents with the help of its API. It can help to manipulate the DOM, use external libraries to carry out the task required.
<h3>Screen Capture</h3>
PhantomJS helps in taking a screen capture of a page specified and save the same as an image in various formats like PNG, JPEG, PDF, and GIF. With the help of the screen capture, it can easily help to make sure the web content is fine.
PhantomJS offers properties and methods with the help of which it allows developers to adjust the size of the screenshots and specify the area they want to capture.
<h3>Headless Testing</h3>
PhantomJS helps testing of UI at the command line. While, with the help of a screenshot, it can easily help to find errors in the UI. PhantomJS sometimes cannot help with testing alone. However, it can be wrapped along with other testing libraries like Mocha, Yoeman, etc. You can take the help of PhantomJS to upload a file and submit the form.
PhantomJS can be used to test logins across the sites and make sure the security is not compromised. PhantomJS can be used along with other tools like <b>CasperJS, Mocha, Qunit</b> to make the testing more powerful.
<h3>Network Monitoring</h3>
One of the important features of PhantomJS is its usage to monitor the network connection using the API available. PhantomJS permits the inspection of network traffic; it is suitable to build various analysis on the network behavior and performance.
PhantomJS can be used to collect the data about the performance of the webpage in a live environment. PhantomJS can be used with tools like <b>Yslow</b> to gather performance metrics of any websites.

<h2><span class="orange">PhantomJS - Overview</span></h2>
<h2><span class="orange">PhantomJS - Environment Setup</span></h2>
PhantomJS is a free software and is distributed under the <b>BSD License</b>. It is easy to install and it offers multiple features to execute the scripts. PhantomJS can be easily run on multiple platforms such as Windows, Linux, and Mac.
For downloading PhantomJS, you can go to 鈥&lt;93&gt; <a href="http://phantomjs.org/" target="_blank" rel="nofollow">http://phantomjs.org/</a> and then click on the download option.
<h2>For Windows</h2>
The download page shows you the options for download for different OS. Download the zip file, unpack it and you will get an executable <b>phantom.exe</b>. Set the PATH environment variable to the path of phantom.exe file. Open a new command prompt and type <b>phantomjs 鈥搗</b>. It should give you the current version of PhantomJS that is running.
<h2>For MAC OS X</h2>
Download the PhantomJS zip file meant for MAC OS and extract the content. Once the content is downloaded, move the PhantomJS to 鈥&lt;93&gt; <b>/usr/local/bin/</b>. Execute PhantomJS command i.e. phantomjs 鈥搗 at the terminal and it should give you the version description of PhantomJS.
<h2>Linux 64 bit</h2>
Download the PhantomJS zip file meant for Linux 64 bit and extract the content. Once the content is downloaded, move PhantomJS folder to <b>/usr/local/share/</b> and <b>create a symlink</b> 
sudo mv $PHANTOM_JS /usr/local/share sudo ln -sf /usr/local/share/$PHANTOM_JS/bin/phantomjs /usr/local/bin.
Execute phantomjs 鈥搗 at the terminal and it should give the version of PhantomJS.
<h2>Linux 32 bit</h2>
Download the PhantomJS zip file meant for Linux 32 bit and extract the content. Once the content is downloaded, move the PhantomJS folder to <b>/usr/local/share/</b> and create a symlink 
sudo mv $PHANTOM_JS /usr/local/share sudo ln -sf /usr/local/share/$PHANTOM_JS/bin/phantomjs /usr/local/bin.
Execute phantomjs 鈥搗 at the terminal and it should give the version of PhantomJS.
The PhantomJS source code can also be taken from the git repository by clicking on the following link 鈥&lt;93&gt; <a href="https://github.com/ariya/phantomjs/" target="_blank" rel="nofollow">https://github.com/ariya/phantomjs/</a>
To run scripts in PhantomJS, the command is as follows 
phantomjs jsfile arg1 arg2鈥<a6></a6>

<h2><span class="orange">PhantomJS - Environment Setup</span></h2>
<h2><span class="orange">PhantomJS - Object</span></h2>
In this chapter, we will look at the four important objects PhantomJS. They are as follows 

<li>CookiesEnabled</li>
<li>Cookies</li>
<li>LibraryPath</li>
<li>Version</li>
</ul>
Let us now discuss each of these in detail.
<h2>cookiesEnabled</h2>
It tells whether the cookies are enabled or not. It will return <b>true</b>, if yes; otherwise <b>false</b>.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.cookiesEnabled
<h3>Example</h3>
<b>cookieenabled.js</b>
phantom.addCookie ({     //adding cookie with addcookie property    name: 'c1',    value: '1',    domain: 'localhost' }); console.log("Cookie Enabled value is : "+phantom.cookiesEnabled); phantom.exit();
<h3>Output</h3>
<b>Command</b>  phantomjs cookieenabled.js
Cookie Enabled value is : true 
<h2>Cookies</h2>
It helps to add and set cookies to a domain. It returns an object with all the cookies available for the domain.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.cookies; 
<h3>Example</h3>
<b>Filename: phantomcookie.js</b>
phantom.addCookie ({    name: 'c1',    value: '1',    domain: 'localhost' }); phantom.addCookie ({    name: 'c2',    value: '2',    domain: 'localhost' }); phantom.addCookie ({    name: 'c3',    value: '3',    domain: 'localhost' }); console.log(JSON.stringify(phantom.cookies)); phantom.exit();
<h3>Output</h3>
<b>Command</b>  phantomjs phantomcookie.js
[{"domain":".localhost","httponly":false,"name":"c3","path":"/","secure":false, " value":"3"},{"domain":".localhost","httponly":false,"name":"c2","path":"/","sec u re":false,"value":"2"},{"domain":".localhost","httponly":false,"name":"c1","pat h":"/","secure":false,"value":"1"}]
In the above example, we added some cookies to the localhost domain. We then fetched it using <b>phantom.cookies</b>. It returns an object with all the cookies by using the <b>JSON stringify</b> method to convert the JavaScript object into a string. You can also use <b>foreach</b> to access the name/values of the cookies.
<h2>LibraryPath</h2>
PhantomJS libraryPath stores the script path to be used by the <b>injectJS</b> method.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.libraryPath 
<h3>Example</h3>
Here is an example to find out the version.
var webPage = require('webpage');var page = webPage.create();page.open('http://www.tutorialspoint.com/jquery', function(status) {   if (status === "success") {       page.includeJs('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js ', function() {          if (page.injectJs('do.js')) {             // returnTitle is a function loaded from our do.js file - see below             return returnTitle();          });                  console.log(title);          phantom.exit();       }    } });window.returnTitle = function() {    return document.title;}; 
The above program generates the following <b>output</b>.
Jquery Tutorial
<h2>Version</h2>
It gives the version of the PhantomJS that is running and returns the details in an object. For example: {"major":2,"minor":1,"patch":1}
<h3>Syntax</h3>
Its syntax is as follows 
phantom.version
<h3>Example</h3>
Here is an example to find out the version.
var a = phantom.version;console.log(JSON.stringify(a));console.log(a.major);console.log(a.minor);console.log(a.patch);phantom.exit();
The above program generates the following <b>output</b>.
{"major":2,"minor":1,"patch":1} 2 1 1
In the above example, we have used <b>console.log</b> to print the version. Currently, we are running on version 2. It returns the object with the details shown in the above code block.

<h2><span class="orange">PhantomJS - Object</span></h2>
<h2><span class="orange">PhantomJS - Methods</span></h2>
PhantomJS is a platform to help execute JavaScript without a browser. To do that, the following methods are used, which help in Adding the Cookie, Deleting, Clearing, Exiting the Script, Injecting JS, etc.
We will discuss more on these PhantomJS methods and their syntax in this chapter. Similar methods i.e. <b>addcookie, injectjs</b> exists on the webpage module, which will be discussed in the subsequent chapters.
PhantomJS exposes the following methods that can help us to execute JavaScript without the browser 

<li>addCookie</li>
<li>clearCookie</li>
<li>deleteCookie</li>
<li>Exit</li>
<li>InjectJS</li>
</ul>
Let us now understand these methods in detail with examples.
<h2>addCookie</h2>
The addcookie method is used to add cookies and store in the data. It is similar to how the browser stores it. It takes a single argument that is an object with all the properties of cookies and the syntax for it looks like shown below 
<h3>Syntax</h3>
Its syntax is as follows 
phantom.addCookie ({    "name" : "cookie_name",     "value" : "cookie_value",    "domain" : "localhost" });
The name, value, domain are mandatory properties to be added to the addcookie function. If any of this property is missing in the cookie objects, this method will fail.

<li><b>name</b>  specifies the name of the cookie.
</li>
<li><b>value</b>  specifies the value of the cookie to be used.
</li>
<li><b>domain</b>  domain to which the cookie will be applied.
</li>
</ul>
<h3>Example</h3>
Here is an example of the <b>addcookie</b> method.
var page = require('webpage').create(),url = 'http://localhost/tasks/a.html'; page.open(url, function(status) {    if (status === 'success') {           phantom.addCookie({   //add name cookie1 with value = 1          name: 'cookie1',          value: '1',          domain: 'localhost'       });       phantom.addCookie({   // add cookie2 with value 2          name: 'cookie2',          value: '2',          domain: 'localhost'       });       phantom.addCookie({   // add cookie3 with value 3          name: 'cookie3',          value: '3',          domain: 'localhost'       });       console.log('Added 3 cookies');       console.log('Total cookies :'+phantom.cookies.length);              // will output the total cookies added to the url.       } else {       console.error('Cannot open file');       phantom.exit(1);    } }); 
<h3>Example</h3>
<b>a.html</b>
&lt;html&gt;   &lt;head&gt;      &lt;title&gt;Welcome to phantomjs test page&lt;/title&gt;   &lt;/head&gt;      &lt;body&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;   &lt;/body&gt;&lt;/html&gt;
The above program generates the following <b>output</b>.
Added 3 cookies Total cookies :3
The code comments are self-explanatory.
<h2>clearCookies</h2>
This method allows deleting all the cookies.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.clearCookies();
This concept works similar to deleting the browser cookies by selecting in the browser menu.
<h3>Example</h3>
Here is an example of the <b>clearCookies</b> method.
var page = require('webpage').create(),url = 'http://localhost/tasks/a.html'; page.open(url, function(status) {    if (status === 'success') {           phantom.addCookie({   //add name cookie1 with value = 1          name: 'cookie1',          value: '1',          domain: 'localhost'       });       phantom.addCookie({   // add cookie2 with value 2          name: 'cookie2',          value: '2',          domain: 'localhost'       });       phantom.addCookie({   // add cookie3 with value 3          name: 'cookie3',          value: '3',          domain: 'localhost'       });       console.log('Added 3 cookies');       console.log('Total cookies :'+phantom.cookies.length);       phantom.clearCookies();       console.log(         'After clearcookies method total cookies :' +phantom.cookies.length);             phantom.exit();        } else {       console.error('Cannot open file');       phantom.exit(1);    } }); 
<b>a.html</b>
&lt;html&gt;   &lt;head&gt;      &lt;title&gt;Welcome to phantomjs test page&lt;/title&gt;   &lt;/head&gt;      &lt;body&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;   &lt;/body&gt;&lt;/html&gt;
The above program generates the following <b>output</b>.
Added 3 cookies Total cookies :3 After clearcookies method total cookies :0 
<h2>deleteCookie</h2>
Delete any cookie in the <b>CookieJar</b> with a 鈥榥ame' property matching cookieName. It will return <b>true</b>, if successfully deleted; otherwise <b>false</b>.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.deleteCookie(cookiename);
Let us understand <b>addcookie, clearcookies</b> and <b>deletecookie</b> with the help of an example.
<h3>Example</h3>
Here is an example to demonstrate the use of deleteCookie method 
<b>File: cookie.js</b>
var page = require('webpage').create(),url = 'http://localhost/tasks/a.html'; page.open(url, function(status) {    if (status === 'success') {           phantom.addCookie({   //add name cookie1 with value = 1          name: 'cookie1',          value: '1',          domain: 'localhost'       });       phantom.addCookie({   // add cookie2 with value 2          name: 'cookie2',          value: '2',          domain: 'localhost'       });      phantom.addCookie({   // add cookie3 with value 3          name: 'cookie3',          value: '3',          domain: 'localhost'       });        console.log('Added 3 cookies');       console.log('Total cookies :'+phantom.cookies.length);             //will output the total cookies added to the url.          console.log("Deleting cookie2");       phantom.deleteCookie('cookie2');             console.log('Total cookies :'+phantom.cookies.length);       phantom.clearCookies();            console.log(         'After clearcookies method total cookies :' +phantom.cookies.length);       phantom.exit();    } else {       console.error('Cannot open file');       phantom.exit(1);    } });
The above program generates the following <b>output</b>.
phantomjs cookie.jsAdded 3 cookiesTotal cookies :3Deleting cookie2Total cookies :2After clearcookies method total cookies :0
<h2>Exit</h2>
The phantom.exit method will exit the script which it had started. It exits the program with return value mentioned. It gives <b>鈥&lt;98&gt;0鈥&lt;99&gt;</b>, if there is no value passed.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.exit(value);
In case you do not add <b>phantom.exit</b>, then the command line assumes that the execution is still on and will not complete.
<h3>Example</h3>
Let us look at an example to understand the use of the <b>exit</b> method.
console.log('Welcome to phantomJs');  // outputs Welcome to phantomJS var a = 1; if (a === 1) {    console.log('Exit 1'); //outputs Exit 1    phantom.exit(); // Code exits. } else {    console.log('Exit 2');    phantom.exit(1); }
The above program generates the following <b>output</b>.
<b>phantomjs exit.js</b>
Welcome to phantomJs Exit 1 
Any piece of code after phantom.exit will not be executed, since phantom.exit is a method to end the script.
<h2>injectJs</h2>
InjectJs is used to add <b>addtionaljs</b> files in phantom. If the file is not found in the current <b>directory librarypath</b>, then the phantom property (phantom.libraryPath) is used as an additional place to track the path. It returns <b>true</b> if the file addition is successful otherwise <b>false</b> for failure, incase if it is not able to locate the file.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.injectJs(filename);
<h3>Example</h3>
Let us look at the following example to understand the use of <b>injectJs</b>.
<b>Filename: inject.js</b>
console.log(鈥淎dded file鈥&lt;9d&gt;); 
<b>File name: addfile.js</b>
var addfile =  injectJs(inject.js);console.log(addfile);phantom.exit();
<h3>Output</h3>
<b>Command</b>  C:\phantomjs\bin&gt;phantomjs addfile.js
Added file // coming from inject.jstrue
In the above example, <b>addfile.js</b> calls the file <b>inject.js</b> using injectJs. When you execute addfile.js, the console.log present in inject.js is shown in the output. It also shows true for addfile variable since the file inject.js was added successfully.

<h2><span class="orange">PhantomJS - Methods</span></h2>
<h2><span class="orange">PhantomJS - Webpage Module Properties</span></h2>
PhantomJS provides quite a lot of properties and methods to help us to interact with the contents inside a webpage.
The require("webpage").create() command creates a webpage object. We will use this object to manipulate the webpage with the help of properties and methods listed below.
var wpage = require("webpage").create();
The following table has the list of all the webpage properties that we are going to discuss.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Properties &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_cangoback_property.htm">canGoBack</a>This property returns <b>true</b> if there is previous page in the navigation history; if not, <b>false</b>.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<a href="/phantomjs/phantomjs_cangoforward_property.htm">canGoForward</a>This property returns true if there is next page in the navigation history; if not, <b>false</b>.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<a href="/phantomjs/phantomjs_cliprect_property.htm">clipRect</a>clipRect is an object with values top, left, width and height and used to take the image capture of the webpage when used by the render() method.
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_content_property.htm">Content</a>This property contains the contents of webpage.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_cookies_property.htm">cookies</a>With cookies, you can set /get the cookies available on the URL. It will also give you the cookies available on the URL and the new cookies set on the page.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<a href="/phantomjs/phantomjs_customheaders_property.htm">customHeaders</a>customHeaders specifies additional HTTP request headers that will be send to server for every request issued by the page.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_event_property.htm">Event</a>It gives long list of events i.e. modifier, keys details.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_focusedframename_property.htm">focusedFrameName</a>Returns the name of the currently focused frame.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_framecontent_property.htm">frameContent</a>This property gives the content of the frame which is active.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_framename_property.htm">frameName</a>Returns the name of the currently focused frame.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_frameplaintext_property.htm">framePlainText</a>This property also gives the contents of the current active frame but only contents without any html tags.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_frametitle_property.htm">frameTitle</a>Gives the title of the active frame.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_frameurl_property.htm">frameUrl</a>This property will give the url of the currently focused frame.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_framescount_property.htm">framesCount</a>Gives the count of the frames present on the page.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_framesname_property.htm">framesName</a>Gives array of frame names.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_librarypath_property.htm">libraryPath</a>This property has the path, which is used by page.inectJs method.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_navigationlocked_property.htm">navigationLocked</a>This property defines whether navigation of the page is allowed or not. If true it will be on current page url and clicking on page to go to next page will not be allowed.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_offlinestoragepath_property.htm">offlineStoragePath</a>This property gives the path where the data is stored using window.localStorage.The path can be changed using --local-storage-path from command line.
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<a href="/phantomjs/phantomjs_offlinestoragequota_property.htm">offlineStorageQuota</a>This property defines the maximum amount of data you can store in window.localStorage.The value is 5242880 bytes which is 5MB.This value can overwritten at command line using the following command --localstorage-quota = size over here.
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<a href="/phantomjs/phantomjs_ownspages_property.htm">ownsPages</a>ownsPages returns true or false if the page opened by the webpage is a child of the webpage.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<a href="/phantomjs/phantomjs_pageswindowname_property.htm">pagesWindowName</a>PagesWindowName will give the names of the windows open using window.open
</td>
</tr>
<tr>
<td class="ts">22</td>
<td>
<a href="/phantomjs/phantomjs_pages_property.htm">pages</a>The pages property will you give array of pages opened in a page using window.open. If the page is closed in url you referring the page will not be considered.
</td>
</tr>
<tr>
<td class="ts">23</td>
<td>
<a href="/phantomjs/phantomjs_papersize_property.htm">paperSize</a>This property gives the size ie dimensions of the webpage when needs to be used to convert the webpage in a pdf format.paperSize contains the dimensions required in an object.
</td>
</tr>
<tr>
<td class="ts">24</td>
<td>
<a href="/phantomjs/phantomjs_plaintext_property.htm">plaintext</a>This property also gives the contents of the current active frame but only contents without any html tags.
</td>
</tr>
<tr>
<td class="ts">25</td>
<td>
<a href="/phantomjs/phantomjs_scrollposition_property.htm">scrollPosition</a>This contains object indicating the scroll position. It gives left and top.
</td>
</tr>
<tr>
<td class="ts">26</td>
<td>
<a href="/phantomjs/phantomjs_settings_property.htm">settings</a>This property will give the settings of the webpage when page.open method is used. Once the page is loaded the changes in settings properties will not create any impact.
</td>
</tr>
<tr>
<td class="ts">27</td>
<td>
<a href="/phantomjs/phantomjs_title_property.htm">title</a>This property will give you the title of the page you are reading.
</td>
</tr>
<tr>
<td class="ts">28</td>
<td>
<a href="/phantomjs/phantomjs_url_property.htm">url</a>This property will give the page url.
</td>
</tr>
<tr>
<td class="ts">29</td>
<td>
<a href="/phantomjs/phantomjs_viewportsize_property.htm">viewportSize</a>This property allows to change the size of the window display. It contains width and height, which you can read or change it as per the needs.
</td>
</tr>
<tr>
<td class="ts">30</td>
<td>
<a href="/phantomjs/phantomjs_windowname_property.htm">windowName</a>Gives the name of the window.
</td>
</tr>
<tr>
<td class="ts">31</td>
<td>
<a href="/phantomjs/phantomjs_zoomfactor_property.htm">zoomFactor</a>This property specifies the zoom factor for render and renderBase64 methods. It helps to zoom a page and take a screen capture if required.
</td>
</tr>
</table>

<h2><span class="orange">PhantomJS - Webpage Module Properties</span></h2>
<h2><span class="orange">PhantomJS - Webpage Module Methods</span></h2>
The Web Page Module has methods for <b>Cookies, Frames, Page Navigation, Reload, Rendering</b> and <b>Uploading of Files</b>.
Following are the methods available on the web page.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Methods &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_addcookie_method.htm">addCookie()</a>addCookie method adds cookies to the page specified.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<b>childFramesCount()</b>This method is deprecated as per <a href="http://phantomjs.org" target="_blank" rel="nofollow">http://phantomjs.org.</a>
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<b>childFramesName()</b>This method is deprecated as per <a href="http://phantomjs.org" target="_blank" rel="nofollow">http://phantomjs.org.</a>
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_clearcookies_method.htm">clearCookies()</a>Will delete all the cookies for the page specified.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_close_method.htm">close()</a>This method is used to close the page and release the memory used. Any of the webpage methods or properties will not work once the close is called.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<b>currentFrameName()</b>This method is deprecated as per <a href="http://phantomjs.org" target="_blank" rel="nofollow">http://phantomjs.org.</a>
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_deletecookie_method.htm">deleteCookie()</a>This will delete a cookie with the name matching with the existing list of cookies present for a given page url.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_evaluateaync_method.htm">evaluateAsync()</a>Evaluate given function asynchronously within the page without blocking current execution. This function helps to execute certain scripts asynchronously.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_evaluatejavascript_method.htm">evaluateJavascript()</a>EvaluateJavaScript helps to execute the function passed to it as a string. Please note the string passed has to be a function only.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_evaluate_method.htm">evaluate()</a>Evaluate will execute the function passed to it. If the function contain console messages it is not displayed directly in the terminal. To display any console messages you need to use onConsoleMessage phantom callback.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_getpage_method.htm">getPage()</a>This will give you the child page that matches the windowname passed in getpage.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_goback_method.htm">goBack()</a>It gives the previous page in navigation history, if only the navigation is not locked.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_goforward_method.htm">goForward()</a>It gives the next page in navigation history, if only the navigation is not locked.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_go_method.htm">go()</a>This method allows you to navigate with the pages.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_includejs_method.htm">includeJs()</a>Includejs executes the external JS file on page and executes the callback function on completion.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_injectjs_method.htm">injectJs()</a>InjectJs includes external script from a specified file into the page. If the file is not available in the current directory, then it used libraryPath for additional search of the file. It returns true if the file is injected, otherwise false.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_openurl_method.htm">openUrl()</a>OpenUrl opens up a webpage. It is similar to open method of PhantomJS. OpenUrl has some additional parameters, which are httpConf, settings and callback functions.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_open_webpage_method.htm">open()</a>Open is used to open up a webpage.
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<a href="/phantomjs/phantomjs_release_method.htm">release()</a>Release will release the memory heap usage for the page. Do not use page instance methods after the release is called. This method is similar to the close method and the usage of it is deprecated. Instead use wpage.close().
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<a href="/phantomjs/phantomjs_reload_method.htm">reload()</a>Reload is used to reload the current page used.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<a href="/phantomjs/phantomjs_renderbase64_method.htm">renderBase64()</a>This method takes the screen capture and gives the image as a string in base46. Renderbase64 supports format like PNG, JPEG and JPG. It does not support gif as of now. You can use clipRect property to define the portion for image capture.
</td>
</tr>
<tr>
<td class="ts">22</td>
<td>
<a href="/phantomjs/phantomjs_renderbuffer_method.htm">renderBuffer()</a>RenderBuffer takes the capture of the webpage to an image buffer, which can be directly sent to the server. Formats supported are PNG, GIF and JPEG.
</td>
</tr>
<tr>
<td class="ts">23</td>
<td>
<a href="/phantomjs/phantomjs_render_method.htm">render()</a>Render helps to take the image buffer and save it as per the format specified.
</td>
</tr>
<tr>
<td class="ts">24</td>
<td>
<a href="/phantomjs/phantomjs_sendevent_method.htm">sendEvent()</a>It is used to send an event to the webpage. They are not dom events. Each of these events are sent to the webpage based on user interaction.
</td>
</tr>
<tr>
<td class="ts">25</td>
<td>
<a href="/phantomjs/phantomjs_setcontent_method.htm">setContent()</a>setcontent will change the page content of the specified url with the contents specified.
</td>
</tr>
<tr>
<td class="ts">26</td>
<td>
<a href="/phantomjs/phantomjs_stop_method.htm">stop()</a>It helps to stop loading of the page.
</td>
</tr>
<tr>
<td class="ts">27</td>
<td>
<b>switchToChildFrame()</b>It is deprecated to use switchToFrame();
</td>
</tr>
<tr>
<td class="ts">28</td>
<td>
<a href="/phantomjs/phantomjs_switchtofocusedframe_method.htm">switchToFocusedFrame()</a>It selects the frame, which is in focus.
</td>
</tr>
<tr>
<td class="ts">29</td>
<td>
<a href="/phantomjs/phantomjs_switchtoframe_method.htm">switchToFrame()</a>Selects frame with the name specified and which is child of current frame.
</td>
</tr>
<tr>
<td class="ts">30</td>
<td>
<a href="/phantomjs/phantomjs_switchtomainframe_method.htm">switchToMainFrame()</a>Selects mainframe i.e. the root window.
</td>
</tr>
<tr>
<td class="ts">31</td>
<td>
<a href="/phantomjs/phantomjs_switchtoparentframe_method.htm">switchToParentFrame()</a>It takes the parent frame of the current child frame.
</td>
</tr>
<tr>
<td class="ts">32</td>
<td>
<a href="/phantomjs/phantomjs_uploadfile_method.htm">uploadFile()</a>This method is used to handle the file upload done using form in html. PhantomJS does not have a direct way to do so using forms the same can be achieved using uploadFile method. It takes html tag selector for file location and the destination where it has to be copied.
</td>
</tr>
</table>

<h2><span class="orange">PhantomJS - Webpage Module Methods</span></h2>
<h2><span class="orange">Webpage Module Events/Callbacks</span></h2>
The callbacks available with the webpage module are described in the following table.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Callbacks &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_onalert.htm">onAlert()</a>This callback is called when there is an alert on the page; the callback takes a string and does not return anything.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<a href="/phantomjs/phantomjs_oncallback.htm">onCallback()</a>OnCallback is used to pass values from webpage to webpage object and it is done using the window.callPhantom() method, which internally invokes the onCallback function.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<a href="/phantomjs/phantomjs_onclosing.htm">onClosing()</a>This is called when the window is closed either by using the page.close() method or the window.close() method.
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_onconfirm.htm">onConfirm()</a>This callback is called when there is a confirmed message called with ok /cancel from the page.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_onconsolemessage.htm">onConsoleMessage()</a>This callback is used when there are console messages used in the webpage. The onConsoleMessage method takes 3 arguments.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<a href="/phantomjs/phantomjs_onerror.htm">onError()</a>It is called when there is JavaScript error. The arguments for onError are msg and stack trace, which is an array.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_onfilepicker.htm">onFilePicker()</a>This is used for upload file the callback is called when user want to upload a file.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_oninitialized.htm">onInitialized()</a>This callback is invoked when the page is called before loading.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_onloadfinished.htm">onLoadFinished()</a>This function is called when the page opened is fully loaded. It has one argument, which tells when loading was a success or a failure.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_onloadstarted.htm">onLoadStarted()</a>This callback is invoked when the page starts loading.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_onnavigationrequested.htm">onNavigationRequested()</a>This callback tells when the navigation event is taking place.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_onpagecreated.htm">onPageCreated()</a>This callback is invoked when a new child window is opened by the page.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_onprompt.htm">onPrompt()</a>This callback is called when a prompt is called by the web page. It takes 2 arguments, message and the answer. The return value is a string.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_onresourceerror.htm">onResourceError()</a>This callback is called when the webpage is not able to upload the file.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_onresourcereceived.htm">onResourceReceived()</a>This callback is called when the resource requested by the page is received.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_onresourcerequested.htm">onResourceRequested()</a>This function is invoked when page requests a resource.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_onresourcetimeout.htm">onResourceTimeout()</a>This callback is called when the requested resource times out, when settings.resourceTimeout is used.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_onurlchanged.htm">onUrlChanged()</a>This is called when the URL changes from the current one using navigation. It has one argument to the call back, which is a new URL targetUrl string.
</td>
</tr>
</table>

<h2><span class="orange">Webpage Module Events/Callbacks</span></h2>
<h2><span class="orange">Webpage Child Process Module</span></h2>
The Phantomjs Child process module helps to interact with the sub-processes and talk to them using <b>stdin /stdout/stderr</b>. The child processes can be used for tasks like <b>printing, sending mail</b> or to <b>invoke programs</b> written in another language. To create a child process module, you need references.
For example 
var process = require("child_process");
<h2>Spawn Method</h2>
With the spawn child process, you can subscribe to its <b>stdout</b> and <b>stderr</b> streams to get data real-time.
<h3>Syntax</h3>
Its syntax is as follows 
var spawn = require('child_process').spawn;
<h3>Example</h3>
Let us look at an example of the spawn method.
var process = require("child_process")var spawn = process.spawnvar child = spawn("cmd", ['/c', 'dir']);child.stdout.on("data", function (data) {   console.log("spawnSTDOUT---VALUE:", JSON.stringify(data))})child.stderr.on("data", function (data) {   console.log("spawnSTDERR:", JSON.stringify(data))})child.on("exit", function (code) {   console.log("spawnEXIT:", code)})
<h3>Output</h3>
The above program generates the following output.
spawnSTDOUT---VALUE: " Volume in drive C is OS\r\n"spawnSTDOUT---VALUE: " Volume Serial Number is 7682-9C1B\r\n\r\n Directory of C:\\phantomjs\\bin\r\n\r\n"spawnSTDOUT---VALUE: "20-05-2017  10:01&lt;DIR&gt;          .\r\n20-05-2017  10:01&lt;DIR&gt;          ..\r\n13-05-2017  20:48   12 a,txt.txt\r\n07-05-2017  08:5163 a.js\r\n06-05-2017  16:32           120,232 a.pdf\r\n13-05-2017  20:49 spawnEXIT: 0 

<h2><span class="orange">Webpage Child Process Module</span></h2>
<h2><span class="orange">PhantomJS - File System Module Properties</span></h2>
The File System Module has many APIs to deal with files and directories. You can create/write and delete a file/directory. To start using the file system module you must require a reference to the <b>fs module</b>.
var fs = require('fs');
There are two properties available for file system module: <b>Separator</b> and <b>Working Directory</b>. Let us understand them in detail.
<h2>Separator</h2>
It tells you the separator used for the file paths.

<li>For windows:<b>\</b>
</li>
<li>For Linux: <b>/</b>
</li>
</ul>
<h3>Syntax</h3>
Its syntax is as follows 
fs.seperator
<h3>Example</h3>
var fs = require('fs');console.log(fs.seperator);phantom.exit();
The above program generates the following <b>output</b>.
undefined
<h2>workingDirectory</h2>
The working directory is the directory in which PhantomJS executes.
<h3>Syntax</h3>
Its syntax is as follows 
var fs = require('fs');fs.workingDirectory;
<h3>Example</h3>
var fs = require('fs');console.log(fs.workingDirectory);phantom.exit();
The above program generates the following <b>output</b>.
C:/phantomjs/bin

<h2><span class="orange">PhantomJS - File System Module Properties</span></h2>
<h2><span class="orange">PhantomJS - File System Module Methods</span></h2>
The following table has all the methods and their descriptions, which are available on the File System module.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Methods &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_absolute_method.htm">absolute</a>This method gives the absolute path where PhantomJS runs.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<a href="/phantomjs/phantomjs_changeworkingdirectory_method.htm">changeWorkingDirectory</a>This allows you to change the working directory and returns true, if it succeeds otherwise returns false.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<a href="/phantomjs/phantomjs_copytree_method.htm">copyTree</a>copyTree will copy a directory from one path to another. The first parameter is a source folder and the second parameter is a destination folder.
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_copy_method.htm">copy</a>This method helps to copy file from one location to another. It takes two parameters. The first parameter is the source file and the second parameter is the file path, where it has to be copied. It will throw an error, if the source or destination file does not exist.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_exists_method.htm">exists</a>It checks whether the given file path exists in the system. It returns true, if it is present, otherwise false.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<a href="/phantomjs/phantomjs_isabsolute_method.htm">isAbsolute</a>This method will return true, if the file path is absolute and false, if relative.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_isdirectory_method.htm">isDirectory</a>isDirectory tells if the given file is a directory or not. It returns true, if directory otherwise false. It gives false in case if the given path does not exist.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_isexecutable_method.htm">isExecutable</a>This method will tell if the given file is executable or not. It returns true, if executable, otherwise false.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_isfile_method.htm">isFile</a>This gives details whether the filepath given is a file or not. It returns true, if it is a file and false, if it is not.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_islink_method.htm">isLink</a>This will give you true, if the file path is a symlink, otherwise false.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_isreadable_method.htm">isReadable</a>It checks if the given file is readable or not. It gives true, if yes and false, if not.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_iswritable_method.htm">isWritable</a>It tells whether if a given file is writable. Returns true, if yes, otherwise false.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_lastmodified_method.htm">lastModified</a>Gives the details of the last modification done to the file. It tells the date and time of when the file was last modified.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_list_method.htm">list</a>It gives all the files present in the directory.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_makedirectory_method.htm">makeDirectory</a>Creates a new directory.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_maketree_method.htm">makeTree</a>makeTree creates all necessary folders to be able to form final directories. This will return true, if the creation was successful, otherwise false. If the directory already exists, it will return true.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_move_method.htm">move</a>It will move the file from one path to another.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_open_file_system_method.htm">open</a>It is used to open up the file.
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<a href="/phantomjs/phantomjs_readlink_method.htm">readLink</a>This will return the absolute path of a file or a folder pointed by a symlink (or shortcut on Windows). If the path is not a symlink or shortcut, it will return an empty string.
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<a href="/phantomjs/phantomjs_read_method.htm">read</a>This will read the given file.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<a href="/phantomjs/phantomjs_removedirectory_method.htm">removeDirectory</a>This will remove the given directory.
</td>
</tr>
<tr>
<td class="ts">22</td>
<td>
<a href="/phantomjs/phantomjs_removetree_method.htm">removeTree</a>It will delete all the files and folders from the given folder and finally delete the folder itself. If there is any error while doing this process, it will throw an error 鈥&lt;93&gt; 'Unable to remove directory tree PATH' and hang execution.
</td>
</tr>
<tr>
<td class="ts">23</td>
<td>
<a href="/phantomjs/phantomjs_remove_method.htm">remove</a>It removes the given file.
</td>
</tr>
<tr>
<td class="ts">24</td>
<td>
<a href="/phantomjs/phantomjs_size_method.htm">size</a>It gives the size of the file.
</td>
</tr>
<tr>
<td class="ts">25</td>
<td>
<a href="/phantomjs/phantomjs_touch_method.htm">touch</a>It creates a given file.
</td>
</tr>
<tr>
<td class="ts">26</td>
<td>
<a href="/phantomjs/phantomjs_write_method.htm">write</a>Writes to a given file.
</td>
</tr>
</table>

<h2><span class="orange">PhantomJS - File System Module Methods</span></h2>
<h2><span class="orange">PhantomJS - System Module Properties</span></h2>
In this chapter, we will discuss regarding the various System Module Properties of PhantomJS.
<h2>args</h2>
The system module of PhantomJS has different properties, which help to pass arguments, get to know the file that is executed, etc.
The args property basically returns the arguments passed at the command line. You can also pass the page-URL that you want to read. If you want to store the screen-capture pdf-file or upload file, the details can be passed to the command line and can be read using the <b>args</b> property.
Let us find the length and the way to fetch each argument passed to the command line.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system'); system.args;
<h3>Example</h3>
Take a look at the following example to understand how this property works.
var system = require('system');console.log(system.args.length);if (system.args.length&gt;0) {   console.log(JSON.stringify(system.args));}phantom.exit();
The above program generates the following <b>output</b>.
<b>Command</b>  phantomsjs args.js <b>http://localhost/tasks/request.html</b>
2["args.js","http://localhost/tasks/request.html"]
The first value is the name of the file and next value is the URL passed. You can pass more arguments in the command line and fetch the same using <b>system.args</b>.
<h2>env</h2>
The <b>env</b> property returns the details of the system.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system'); system.env;
<h3>Example</h3>
var system = require('system'); console.log(JSON.stringify(system.env)); phantom.exit();
The above program generates the following output.
{"=::":"::\\","=C:":"C:\\phantomjs\\bin","=ExitCode":"00000000","ALLUSERSPROFILE":"C:\\ProgramData","APPDATA":"C:\\Users\\UserName\\AppData\\Roaming","COMPUTERNAME":"X","ComSpec":"C:\\Windows\\system32\\cmd.exe","CommonProgramFiles":"C:\\Program Files (x86)\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files","CommonProgramW6432":"C:\\Program Files\\Common Files","FP_NO_HOST_CHECK":"NO","HOMEDRIVE":"C:","HOMEPATH":"\\Users\\UserName","LOCALAPPDATA":"C:\\Users\\UserName\\AppData\\Local","LOGONSERVER":"\\\\MicrosoftAccount","NUMBER_OF_PROCESSORS":"2","OS":"Windows_NT","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS ;.VBE;.JS;.JSE;.WSF;.WSH;.MSC","PROCESSOR_ARCHITECTURE":"x86","PROCESSOR_ARCHITEW64 32":"AMD64","PROCESSOR_IDENTIFIER":"Intel64 Family 6 Model 58Stepping9,GenuineIntel","PROCESSOR_LEVEL":"6","PROCESSOR_REVISION":"3a09","PROMPT":"$P$G","PSModulePath":"C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\" ,"PUBLIC":"C:\\Users\\Public","Path":"C:\\Program Files\\Dell\\DW WLAN Card;c:\\Program Files (x86)\\Intel\\iCLS Client\\;c:\\Program Files\\Intel\\iCLSClient\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\ \Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) ManagementEngineComponents\\IPT;c:\\ProgramFiles\\WIDCOMM\\BluetoothSoftware\\;c:\\ProgramFiles\\WIDCOMM\\BluetoothSoftware\\syswow64;C:\\ProgramFiles(x86)\\WindowsLive\\Shared;C:\\ProgramFiles\\nodejs\\;C:\\ProgramFiles\\Git\\cmd;C:\\ProgramFiles\\ OpenVPN\\bin;C:\\ProgramFiles(x86)\\Skype\\Phone\\;C:\\Users\\UserName\\AppData\\Roaming\\npm","ProgramData":"C:\\ProgramData","ProgramFiles":"C:\\ProgramFiles(x86)", "ProgramFiles(x86)":"C:\\ProgramFiles(x86)","ProgramW6432":"C:\\ProgramFiles","SESSIONNAME":"Console","SystemDrive":"C:","SystemRoot":"C:\\Windows","TEMP":"C:\\Users\ \Username~1\\AppData\\Local\\Temp","TMP":"C:\\Users\\Username~1\\AppData\\Local\\Temp","USERDOMAIN":"USER","USERDOMAIN_ROAMINGPROFILE":"USER","USERNAME":"X Y","USERPROFILE":"C:\\Users\\X Y","windir":"C:\\Windows"}
<h2>OS</h2>
It returns the details of the operating system used. It returns an object with architecture, name of the OS, and version.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system');system.os;
<h3>Example</h3>
var system = require('system');console.log(JSON.stringify(system.os));phantom.exit();
The above program generates the following output.
{"architecture":"32bit","name":"windows","version":"8.1"}
<h2>pid</h2>
This property returns the process ID.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system');system.pid;
<h3>Example</h3>
Let us look at an example of the <b>pid</b> property.
var system = require('system');console.log(system.pid);phantom.exit();
The above program generates the following output.
2160
<h2>platform</h2>
This property returns the platform we are working on.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system');system.platform;
<h3>Example</h3>
var system = require('system');console.log(system.platform);phantom.exit();
The above program generates the following output.
Phantomjs

<h2><span class="orange">PhantomJS - System Module Properties</span></h2>
<h2><span class="orange">PhantomJS - Web Server Module Properties</span></h2>
PhantomJS uses an embedded web server called <b>mongoose</b>. Right now, PhantomJS cannot connect with any other production webserver. With respect to connection, it can deal with 10 connections at a time and more than 10 requests will be waiting in a queue.
To start a webserver, we need to use the following syntax 
var webserver = require (鈥榳ebserver鈥&lt;99&gt;);
Let us understand the <b>Port</b> property, which is used to listen to the requests that are sent to the webserver.
<h2>port</h2>
The Port property for a webserver is used to listen to the request that are sent to it.
<h3>Syntax</h3>
Its syntax is as follows 
var server = require('webserver').create();var listening = server.listen(port, function (request, response) {});
<h3>Example</h3>
Let us take an example to understand how the <b>port</b> property works.
var webserver = require('webserver'); var server = webserver.create(); var service = server.listen(8080,function(request,response){  }); if(service) console.log("server started - http://localhost:" + server.port); 
The above program generates the following output.
server started - http://localhost:8080

<h2><span class="orange">PhantomJS - Web Server Module Properties</span></h2>
<h2><span class="orange">PhantomJS - Web Server Module Methods</span></h2>
In this chapter, we will discuss regarding the various methods of the Web Server Module of PhantomJS.
<h2>close</h2>
The <b>close</b> method is used to close the webserver.
<h3>Syntax</h3>
Its syntax is as follows 
var server = require('webserver').create();server.close();
<h3>Example</h3>
The following example shows how you can use the <b>close</b> method.
var webserver = require('webserver');var server = webserver.create();var service = server.listen(8080,function(request,response){});if(service) console.log("server started - http://localhost:" + server.port);console.log(server.port);server.close();console.log(server.port);
The above program generates the following <b>output</b>.
server started - http://localhost:8080 8080
Here, we have consoled <b>server.port</b> after closing the server. Hence, it will not respond, as the webserver is already closed.
<h2>listen</h2>
The <b>server.listen</b> method takes the port and callback function with two arguments, which are 鈥&lt;93&gt; <b>Request Object</b> and <b>Response Object</b>.
The <b>Request Object</b> contains the following properties 

<li><b>Method</b>  This defines the method GET /POST.
</li>
<li><b>URL</b>  This displays the requested URL.
</li>
<li><b>httpVersion</b>  This displays the actual http version.
</li>
<li><b>Headers</b>  This displays all the headers with key value pairs.
</li>
<li><b>Post</b>  Request body applicable only for the post method.
</li>
<li><b>postRaw</b>  If the Content-Type header is set to 'application/x-www-formurlencoded', the original content of the post will be stored in this extra property (postRaw) and then that post will be automatically updated with a URL-decoded version of the data.
</li>
</ul>
The <b>Response Object</b> contains the following properties 

<li><b>Headers</b>  Has all the HTTP headers as key-value pairs. It should be set before calling write for the first time.
</li>
<li><b>SetHeader</b>  This sets a specific header.
</li>
<li><b>Header (name)</b>  It returns the value of the given header.
</li>
<li><b>StatusCode</b>  It sets the returned HTTP status code.
</li>
<li><b>SetEncoding (encoding)</b>  This is used to convert data given to write(). By default, data will be converted to UTF-8. Indicate "binary" if data is a binary string. Not required if data is a Buffer (e.g. from page.renderBuffer).
</li>
<li><b>Write (data)</b>  It sends data for the response body. Can be called multiple times.
</li>
<li><b>WriteHead (statusCode, headers)</b>  It sends a response header to the request. The status code is a 3-digit HTTP status code (e.g. 404). The last arguments and headers are the response headers.
</li>
<li><b>Close</b>  It closes the http connection.
</li>
<li><b>CloseGracefully</b>  It is similar to close(), but it makes sure the response headers have been sent first.
</li>
</ul>
<h3>Syntax</h3>
Its syntax is as follows 
var server = require('webserver').create(); var listening = server.listen(8080, function (request, response) {} 
<h3>Example</h3>
Let us take an example to understand how the <b>listen</b> method works.
var page = require('webpage').create(); var server = require('webserver').create(); var port = 8080; var listening = server.listen(8080, function (request, response) {    console.log("GOT HTTP REQUEST");    console.log(JSON.stringify(request, null, 4));       // we set the headers here    response.statusCode = 200;    response.headers = {"Cache": "no-cache", "Content-Type": "text/html"};      // the headers above will now be sent implictly    // now we write the body    response.write("&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcone to Phantomjs&lt;/title&gt;&lt;/head&gt;");    response.write("&lt;body&gt;&lt;p&gt;Hello World&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;");    response.close(); }); if (!listening) {    console.log("could not create web server listening on port " + port);    phantom.exit(); } var url = "http://localhost:" + port + "/foo/response.php"; console.log("sending request to :" +url); page.open(url, function (status) {    if (status !== 'success') {       console.log('page not opening');    } else {       console.log("Getting response from the server:");       console.log(page.content);    }       phantom.exit(); });
The above program generates the following <b>output</b>.
sending request to :http://localhost:8080/foo/response.php GOT HTTP REQUEST {    "headers": {      "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",       "Accept-Encoding": "gzip, deflate",       "Accept-Language": "en-IN,*",       "Connection": "Keep-Alive",       "Host": "localhost:8080",       "User-Agent": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1          (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"    },    "httpVersion": "1.1",    "method": "GET",    "url": "/foo/response.php" } Getting response from the server: &lt;html&gt;&lt;head&gt;&lt;title&gt;Welcone to Phantomjs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;Hello World&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; 

<h2><span class="orange">PhantomJS - Web Server Module Methods</span></h2>
<h2><span class="orange">PhantomJS - Command Line Interface</span></h2>
PhantomJS can be executed using the keyword "phantomjs" and the name of the file. For example, "phantomjs file.js".
You can also pass arguments into "file.js" as follows 
phantomjs [options] file.js arg1 arg2 ...
Let us go through some of the options available at the command line.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Option &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<b>--help or 鈥揾</b>
Will display all the command line options. Halts immediately and will not run the script passed.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<b>--version or 鈥搗</b>
Prints the version of PhantomJS running. This will halt the execution of script to be run.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<b>--debug[true|false]</b>
Prints warnings and debug messages. By default, it is set to false. You can also use [yes|no].
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<b>--cookies-file = /path/to/cookies.txt</b>
File name to store persistent cookies.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<b>--diskcache=[true|false]</b>
Enables disk cache. It also takes values [yes|no]
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<b>--disk-cahe-path</b>
Path for disk cache.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<b>--ignore-sslerrors=[true|false]</b>
Ignore SSL errors. For example 鈥&lt;93&gt; Expired or self-signed certificate errors. Default is false. It also takes values [yes|no].
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<b>--loadimages=[true|false]</b>
Loads all inline images. Default value is true. It also takes [yes|no].
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<b>--local-storagepath=/some/path</b>
Path to save LocalStorage content and WebSQL content.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<b>--local-storagequota=number</b>
Maximum size to allow for data.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<b>--local-url-access</b>
Allows use of 鈥榝ile:///鈥&lt;99&gt; URLs (default is true).
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<b>--local-to-remote-urlaccess=[true|false]</b>
Allows local content to access remote URL. Default is false. It also takes values [yes|no].
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<b>--max-disk-cachesize=size</b>
Limits the size of disk cache (in KB)
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<b>--offline-storage-path</b>
Specifies location for offline storage.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<b>--offline-storage-quota</b>
Sets the maximum size of the offline storage in KB.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<b>--outputencoding=encoding</b>
Sets the encoding used for terminal output. Default is utf-8.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<b>--proxy=address:port</b>
Specifies the proxy server to be used (For example 鈥&lt;93&gt; proxy=192.168.1.1:8080)
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<b>--proxytype=[http|socks5|none]</b>
Specifies the type of proxy server (default is http)
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<b>--proxy-auth</b>
Authentication information for the proxy. For example 鈥&lt;93&gt;
--proxy-auth=username:password
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<b>--scriptencoding=encoding</b>
Sets the encoding used for the script. Default is utf8.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<b>--script-language</b>
Sets the script language.
</td>
</tr>
</table>

<h2><span class="orange">PhantomJS - Command Line Interface</span></h2>
<h2><span class="orange">PhantomJS - Screen Capture</span></h2>
PhantomJS is very helpful in taking a screenshot of a webpage and converting a webpage into a PDF. We have given here a simple example to demonstrate how it works.
<h2>Example</h2>
var page = require('webpage').create();page.open('http://phantom.org/',function(status){   page.render('phantom.png');   phantom.exit();});
Execute the above program and the output will be saved as <b>phantom.png</b>.
<img src="/phantomjs/images/optimal_solution.jpg" alt="Optimal Solution"><h2>Convert Webpages into PDFs</h2>
PhantomJS also helps to convert webpages into PDFs with header and footer added to it. Take a look at the following example to understand how it works.
var wpage = require('webpage').create(); var url = "https://en.wikipedia.org/wiki/Main_Page"; var output = "test.pdf"; wpage.paperSize = {    width: screen.width+'px',    height: '1500px',       margin: {      'top':'50px',       'left':'50px',       'rigtht':'50px'    },    orientation:'portrait',    header: {       height: "1cm",       contents: phantom.callback(function(pageNumber, nPages) {          return "&lt;h5&gt;Header &lt;b&gt;" + pageNumber + " / " + nPages + "&lt;/b&gt;&lt;/h5&gt;";       })    },    footer: {       height: "1cm",       contents: phantom.callback(function(pageNumber, nPages) {            return "&lt;h5&gt;Footer &lt;b&gt;" + pageNumber + " / " + nPages + "&lt;/b&gt;&lt;/h5&gt;";       })    } } wpage.open(url, function (status) {    if (status !== 'success') {       console.log('Page is not opening');       phantom.exit();    } else {       wpage.render(output);       phantom.exit();        } });
The above program generates the following <b>output</b>.
The above will convert the page into pdf and will be saved in test.pdf
<h2>Convert a Canvas to an Image</h2>
Phantomjs can easily convert a Canvas to an Image. Take a look at the following example to understand how it works.
var page = require('webpage').create(); page.content = '&lt;html&gt;&lt;body&gt;&lt;canvas id="surface" width="400" height="400"&gt;&lt;/canvas&gt;&lt;/body&gt;&lt;/html&gt;'; page.evaluate(function() {   var context,e1;    el = document.getElementById('surface');       context = el.getContext('2d');    context.font = "30px Comic Sans MS";    context.fillStyle = "red";    context.textAlign = "center";    context.fillText("Welcome to PhantomJS ", 200, 200);       document.body.style.backgroundColor = 'white';    document.body.style.margin = '0px'; }); page.render('canvas.png'); phantom.exit(); 
The above program generates the following <b>output</b>.
<img src="/phantomjs/images/welcome_phantomjs.jpg" alt="Welcome Phantomjs">
<h2><span class="orange">PhantomJS - Screen Capture</span></h2>
<h2><span class="orange">PhantomJS - Page Automation</span></h2>
PhantomJS, with the help of its webpage module APIs, can manipulate webpages and perform operations such as DOM manipulation, clicking on buttons, etc.
<h2>Fetch Images from a Page</h2>
The following program shows how you can use PhantomJS to fetch images from a page.
var wpage = require('webpage').create();wpage.onConsoleMessage = function(str) {   console.log(str.length);}wpage.open("http://phantomjs.org", function(status) {   console.log(status);   var element = wpage.evaluate(function() {      var imgdata =  document.querySelectorAll('img');      var imgsrc = [];            if (imgdata) {         for (var i in imgdata) {            imgsrc.push(imgdata[0].src);         }      }      return imgsrc;   });   console.log(JSON.stringify(element));});
The above program generates the following <b>output</b>.
Success ["http://phantomjs.org/img/phantomjslogo.png","http://phantomjs.org/img/phantom js-logo.png","http://phantomjs.org/img/phantomjslogo.png","http://phantomjs.org /img/phantomjs-logo.png"]
It is possible to include external JavaScript in a page using the <b>injectJS webpage method</b>. There are many properties and methods, which can help page automation and do many other things. You can refer the webpage module where the properties and methods are explained in detail.

<h2><span class="orange">PhantomJS - Page Automation</span></h2>
<h2><span class="orange">PhantomJS - Network Monitoring</span></h2>
With help of PhantomJS, we can monitor the network and validate the behavior and performance of a particular webpage. There are callbacks in PhantomJS, i.e., <b>onResourceRequested</b> and <b>onResourceReceived</b>, which help in monitoring the traffic for a given page.
<h2>Example</h2>
The following example shows how you can use PhantomJS to monitor traffic for a given page.
function createHAR(address, title, startTime, resources) {        // this function formats the data which is coming from       onresourcerequest and onresourcereceived    var entries = [];       resources.forEach(function (resource) {       var request = resource.request, startReply = resource.startReply,          endReply = resource.endReply;              if (!request || !startReply || !endReply) {          return;       }              // Exclude Data URI from HAR file because       // they aren't included in specification       if (request.url.match(/(^data:image\/.*)/i)) {          return;       }        entries.push ({          startedDateTime: request.time.toISOString(),          time: endReply.time - request.time,                   request: {             method: request.method,             url: request.url,             httpVersion: "HTTP/1.1",             cookies: [], headers: request.headers,             queryString: [],             headersSize: -1,             bodySize: -1          },          response: {             status: endReply.status,             statusText: endReply.statusText,             httpVersion: "HTTP/1.1",             cookies: [],             headers: endReply.headers,             redirectURL: "",             headersSize: -1,             bodySize: startReply.bodySize,                         content: {                size: startReply.bodySize,                mimeType: endReply.contentType             }          },          cache: {},          timings: {             blocked: 0,             dns: -1,             connect: -1,             send: 0,             wait: startReply.time - request.time,             receive: endReply.time - startReply.time,             ssl: -1          },          pageref: address       });    });     return {       log: {          version: '1.2', creator: {             name: "PhantomJS",             version: phantom.version.major + '.' + phantom.version.minor +                '.' + phantom.version.patch          },          pages: [{             startedDateTime: startTime.toISOString(),             id: address,             title: title,                         pageTimings: {                onLoad: page.endTime - page.startTime             }          }],          entries: entries       }    }; }  var page = require('webpage').create(), system = require('system'); var fs = require('fs');   if (system.args.length === 1) {    console.log('Usage: netsniff.js &lt;some URL&gt;');    phantom.exit(1); } else {    page.address = system.args[1];    page.resources = [];       page.onLoadStarted = function () {  // called when page is loaded       page.startTime = new Date();    };     page.onResourceRequested = function (req) {        // called when any files are requested from given page url       page.resources[req.id] = {          request: req,          startReply: null,          endReply: null       };    };     page.onResourceReceived = function (res) {        //called when any files are received.       if (res.stage === 'start') {          page.resources[res.id].startReply = res;       }       if (res.stage === 'end') {          page.resources[res.id].endReply = res;       }    };     page.open(page.address, function (status) {  // open given page url       var har;             if (status !== 'success') {          console.log('FAIL to load the address');          phantom.exit(1);       } else {          page.endTime = new Date();                   page.title = page.evaluate(function () { // gets the page title             return document.title;          });                      har = createHAR(page.address, page.title, page.startTime, page.resources);                    // calls the function createHAR with page url, starttime, and page resources.          // console.log(JSON.stringify(har, undefined, 4));          fs.write('log.txt', JSON.stringify(har, undefined, 4), 'w');                    // logs are collected in log.txt file.          phantom.exit();       }    }); } <h2>Example of log.txt given to HAR preview</h2>
{    "log": {       "version": "1.2",       "creator": {          "name": "PhantomJS",          "version": "2.1.1"       },       "pages": [          {             "startedDateTime": "2017-05-21T13:41:21.824Z",             "id": "http://www.sample.com",             "title": "Free Sample Products 鈥&lt;93&gt; Sample.com &amp;Gt; Free Samples,                Free Product Samples, Product Test Marketing",             "pageTimings": {                "onLoad": 11081             }          }       ],       "entries": [          {             "startedDateTime": "2017-05-21T13:41:21.815Z",             "time": 1999,                         "request": {                "method": "GET",                "url": "http://www.sample.com/",                "httpVersion": "HTTP/1.1",                "cookies": [],                               "headers": [                   {                      "name": "Accept",                      "value": "text/html,application/xhtml+xml,                        application/xml;q = 0.9,*/*;q = 0.8"                   },                                     {                      "name": "User-Agent",                      "value": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1                         (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"                    }                ],                               "queryString": [],                "headersSize": -1,                "bodySize": -1             },             "response": {                "status": 301,                "statusText": "Moved Permanently",                "httpVersion": "HTTP/1.1",                "cookies": [],                               "headers": [                   {                      "name": "Date",                      "value": "Sun, 21 May 2017 13:41:25 GMT"                   },                                     {                      "name": "Server",                      "value": "Apache/2.2.14 (Ubuntu)"                   },                                     {                      "name": "Location",                      "value": "http://sample.com//"                   },                                     {                      "name": "Vary",                      "value": "Accept-Encoding"                   },                                     {                      "name": "Content-Encoding",                      "value": "gzip"                   },                                     {                      "name": "Keep-Alive",                      "value": "timeout = 15, max = 100"                   },                                    {                      "name": "Connection",                      "value": "Keep-Alive"                   },                                     {                      "name": "Content-Type",                      "value": "text/html; charset = iso-8859-1"                   }                ],                 "redirectURL": "",                "headersSize": -1,                "bodySize": 307,                               "content": {                   "size": 307,                   "mimeType": "text/html; charset = iso-8859-1"                }             },                         "cache": {},             "timings": {                "blocked": 0,                "dns": -1,                "connect": -1,                "send": 0,                "wait": 1999,                "receive": 0,                "ssl": -1             },             "pageref": "http://www.sample.com"          },       ]         {          "startedDateTime": "2017-05-21T13:41:24.898Z",          "time": 885,                   "request": {             "method": "GET",             "url": "http://sample.com/",             "httpVersion": "HTTP/1.1",             "cookies": [],                         "headers": [                {                   "name": "Accept",                   "value": "text/html,application/xhtml+xml,                     application/xml;q = 0.9,*/*;q = 0.8"                },                               {                   "name": "User-Agent",                   "value": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1                      (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"                }             ],             "queryString": [],             "headersSize": -1,             "bodySize": -1          },          "response": {             "status": 200,             "statusText": "OK",             "httpVersion": "HTTP/1.1",             "cookies": [],                         "headers": [                {                   "name": "Date",                   "value": "Sun, 21 May 2017 13:41:27 GMT"                },                               {                   "name": "Server",                   "value": "Apache/2.2.14 (Ubuntu)"                },                               {                   "name": "X-Powered-By",                   "value": "PHP/5.3.2-1ubuntu4.29"                },                               {                  "name": "X-Pingback",                   "value": "http://sample.com/xmlrpc.php"                },                               {                   "name": "Link",                   "value": "&lt;http://sample.com/wp-json/&gt;;                      rel = \"https://api.w.org/\", &lt;http://wp.me/P6Jj5H-4&gt;;                      rel = shortlink"                },                               {                   "name": "Vary",                   "value": "Accept-Encoding"                 },                               {                   "name": "Content-Encoding",                  "value": "gzip"                },               {                   "name": "Keep-Alive",                  "value": "timeout = 15, max = 99"               },               {                  "name": "Connection",                  "value": "Keep-Alive"               },               {                   "name": "Content-Type",                  "value": "text/html; charset = UTF-8"               }            ],            "redirectURL": "",            "headersSize": -1,            "bodySize": 1969,            "content": {               "size": 1969,               "mimeType": "text/html; charset = UTF-8"            }         },         "cache": {},         "timings": {            "blocked": 0,            "dns": -1,            "connect": -1,            "send": 0,            "wait": 869,            "receive": 16,            "ssl": -1         },         "pageref": http://www.sample.com      },      {         "startedDateTime": "2017-05-21T13:41:25.767Z",         "time": 388,         "request": {            "method": "GET",            "url": "http://sample.com/wpcontent/themes/samplecom/style.css",            "httpVersion": "HTTP/1.1",            "cookies": [],            "headers": [               {                  "name": "Accept",                  "value": "text/css,*/*;q = 0.1"               },               {                  "name": "Referer",                  "value": "http://sample.com/"               },               {                  "name": "User-Agent",                  "value": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1                      (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"               }            ],            "queryString": [],            "headersSize": -1,            "bodySize": -1         },         "response": {            "status": 200,            "statusText": "OK",            "httpVersion": "HTTP/1.1",            "cookies": [],            "headers": [               {                  "name": "Date",                  "value": "Sun, 21 May 2017 13:41:27 GMT"               },               {                  "name": "Server",                  "value": "Apache/2.2.14 (Ubuntu)"               },               {                  "name": "Last-Modified",                  "value": "Fri, 22 Apr 2011 00:32:22 GMT"               },               {                  "name": "ETag",                  "value": "\"e1d7-1836-4a176fdbbd180\""               },               {                  "name": "Accept-Ranges",                  "value": "bytes"               },               {                  "name": "Vary",                  "value": "Accept-Encoding"               },               {                  "name": "Content-Encoding",                  "value": "gzip"               },               {                  "name": "Keep-Alive",                  "value": "timeout = 15, max = 98"               },               {                  "name": "Connection",                  "value": "Keep-Alive"               },               {                  "name": "Content-Type",                  "value": "text/css"               }            ],            "redirectURL": "",            "headersSize": -1,            "bodySize": 3174,                        "content": {               "size": 3174,               "mimeType": "text/css"            }         },         "cache": {},         "timings": {            "blocked": 0,            "dns": -1,            "connect": -1,            "send": 0,            "wait": 388,            "receive": 0,            "ssl": -1         },                  "pageref": "http://www.sample.com"      }   }}
<h2>Output</h2>
The above program generates the following output.
<img src="/phantomjs/images/har_preview.jpg" alt="Har Preview">All the logs are collected in a <b>.txt file</b> and later, the same is converted as above using the HAR preview, for example, (<a href="http://www.softwareishard.com/har/viewer/" target="_blank" rel="nofollow">http://www.softwareishard.com/har/viewer/)</a>

<h2><span class="orange">PhantomJS - Network Monitoring</span></h2>
<h2><span class="orange">PhantomJS - Testing</span></h2>
<b>PhantomJS</b> has a lot of API for a webpage, which gives all the details. PhantomJS can be used to for testing like getting the content of a page, taking screen share, converting page into a pdf, etc. There are many popular testing libraries in the market, which can be used along with PhantomJS and can be used for testing.
Some of the popular frameworks that can work with PhantomJS are as follows 

<li>Mocha</li>
<li>Jasmine</li>
<li>Qunit</li>
<li>Hiro</li>
<li>Laika</li>
<li>Buster.JS</li>
<li>WebDriver</li>
</ul>
<h2>Example 鈥&lt;93&gt; PhantomJS with Qunit</h2>
(function () {        var url, timeout,args = require('system').args, page = require('webpage').create();    url = args[1];    timeout = parseInt(10, 10);       page.onConsoleMessage = function (msg) {        //prints all the console messages       console.log(msg);    };    page.onInitialized = function () {  // called when page is initialized       page.evaluate(callqunit);    };    page.onCallback = function (message) { // called from        var result, failed;             if (message) {           if (message.name === 'QUnit.done') {             result = message.data;             failed = !result || !result.total || result.failed;                          if (!result.total) {                console.error('No tests were executed');             }             pageexit(failed ? 1 : 0);          }       }    };     page.open(url, function (status) { // opening page        if (status !== 'success') {          console.error('Unable to access network: ' + status);          pageexit(1);       } else {          var checkqunit = page.evaluate(function () {             //evaluating page and chcking if qunit object                is present on the given page url             return (typeof QUnit === 'undefined' || !QUnit);          });                   if (checkqunit) {             console.error('Qunit scripts are not present on the page');             pageexit(1);          }                               //timeout of 10seconds is used otherwise message from console will get printed.          setTimeout(function () {             console.error('The specified timeout of ' + timeout + ' seconds has expired.                Aborting...');             pageexit(1);          }, timeout * 1000);                 }    });     function callqunit() {
<h2>qunit.html</h2>
&lt;!DOCTYPE html&gt; &lt;html&gt;    &lt;head&gt;       &lt;meta charset = "utf-8"&gt;       &lt;meta name = "viewport" content = "width = device-width"&gt;       &lt;title&gt;QUnit Example&lt;/title&gt;       &lt;link rel = "stylesheet" href = "https://code.jquery.com/qunit/qunit-2.3.2.css"&gt;    &lt;/head&gt;    &lt;body&gt;       &lt;div id = "qunit"&gt;&lt;/div&gt;       &lt;div id = "qunit-fixture"&gt;&lt;/div&gt;       &lt;script src = "https://code.jquery.com/qunit/qunit-2.3.2.js"&gt;&lt;/script&gt;    &lt;/body&gt;    &lt;/html&gt; 
<h2>Output</h2>
<b>Command</b>  phantomjs qunit.js http://localhost/tasks/qunit.html
The above program generates the following output.
{"passed":3,"failed":2,"total":5,"runtime":23}Time taken is 23ms to run 5 tests.3 passed, 2 failed.

<h2><span class="orange">PhantomJS - Testing</span></h2>
<h2><span class="orange">PhantomJS - REPL</span></h2>
<b>REPL</b> stands for <b>Read Eval Print Loop</b>. In PhantomJS, REPL is an interactive mode to test the JavaScript code. You can do the same thing, which is done in Google Chrome Inspector or Firebug to execute some piece of code directly on the console. REPL returns you the same platform to execute the scripts.
The typed command is sent to the interpreter for immediate interpretation (EVAL) and to provide feedback (PRINT). Enter <b>PhantomJS</b> in the command line and it will take you to the interactive mode, where you can execute your code directly.
<h2>Syntax</h2>
Its syntax is as follows 
Phantomjs
<h2>Example</h2>
The following example demonstrates how REPL works in PhantomJS.
phantomjs&gt; console.log("Welcome to phantomjs");Welcome to phantomjsUndefinedphantomjs&gt; window.navigator {   "appCodeName": "Mozilla",   "appName": "Netscape",   "appVersion": "5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1 (KHTML, like Gecko)      PhantomJS/2.1.1 Safari/538.1",   "cookieEnabled": true,   "language": "en-IN",   "mimeTypes": {      "length": 0   },   "onLine": false,   "platform": "Win32",   "plugins": {      "length": 0   },   "product": "Gecko   "productSub": "20030107",   "userAgent": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1 (KHTML, like Gecko)      PhantomJS/2.1.1 Safari/538.1",   "vendor": "Apple Computer, Inc.",   "vendorSub": ""}phantomjs&gt;To find the versionphantomjs&gt; phantom.version {   "major": 2,   "minor": 1,   "patch": 1}phantomjs&gt;
Each command is executed and the result is displayed. Use CTRL+C, CTRL+D or <b>phantom.exit()</b> to come out of the interactive mode.
Use the <b>up/down</b> arrow keys to listen to the previously typed commands.
There is another feature called <b>autocompletion</b>, which helps to remember the command. Just type "phantom" and hit the "Tab" button to get a list of available commands you can execute.
<h2>Output</h2>
The above program generates the following output.
phantomjs&gt; phantom.→| phantomjs&gt; phantom.cookies→| phantomjs&gt; phantom.exit→| phantomjs&gt; phantom.version→|

<h2><span class="orange">PhantomJS - REPL</span></h2>
<h2><span class="orange">PhantomJS - Examples</span></h2>
In this chapter, we are providing a few more practical examples to understand some important features of PhantomJS.
<h2>Example 1 - Find the Page Speed</h2>
In this example, we will use PhantomJS to find the <b>page speed</b> for any given page URL.
var page = require('webpage').create(),    system = require('system'),    t, address;  if (system.args.length === 1) {    console.log('Usage: loadspeed.js &lt;some URL&gt;');    phantom.exit(1); } else {    t = Date.now();    address = system.args[1];       page.open(address, function (status) {       if (status !== 'success') {          console.log('FAIL to load the address');       } else {          t = Date.now() - t;                   console.log('Page title is ' + page.evaluate(function () {             return document.title;          }));          console.log('Loading time ' + t + ' msec');       }       phantom.exit();    }); }
The above program generates the following <b>output</b>.
<b>Command</b>  phantomjs pagespeed.js <a href="http://www.google.com" target="_blank" rel="nofollow">http://www.google.com</a>
Page title is Google Loading time 1396 msec 
<h2>Example 2 - Send a Click Event to a Page</h2>
In the following example, we will use PhantomJS to send a <b>click event</b> to a page.
var page = require('webpage').create(); page.onConsoleMessage = function(str) {    console.log(str); } page.open('http://phantomjs.org/api/phantom/', function(status) {    page.render('beforeclick.png');    console.log(page.url);       var element = page.evaluate(function() {         return document.querySelector('img[src = "http://phantomjs.org/img/phantomjslogo.png"]');    });    page.sendEvent('click', element.offsetLeft, element.offsetTop, 'left');       window.setTimeout(function () {       console.log(page.url);       page.render('afterclick.png');       phantom.exit();    }, 5000);    console.log('element is ' + element); }); 
The above program generates the following <b>output</b>.
http://phantomjs.org/api/phantom/ element is [object Object] http://phantomjs.org/
Our program will create the following two <b>png</b> images in the <b>bin</b> folder. These two images show the difference before and after the execution of the above program.
<img src="/phantomjs/images/before_click.jpg" alt="Before Click">
<img src="/phantomjs/images/optimal_solution.jpg" alt="Optimal Solution"><h2>Example 3 - Submit a Form</h2>
The following example shows how to submit a form using PhantomJS.
var wpage = require('webpage').create();  wpage.open("http://localhost/tasks/submitform.html", function(status) {    console.log(status);    wpage.uploadFile('input[name = fileToUpload]', 'output.png');    wpage.render("sform.png");        var element = wpage.evaluate(function() {         return document.querySelector('input[type = "submit"]');         // getting details of submit button using queryselector.    });    wpage.sendEvent('click', element.offsetLeft, element.offsetTop, 'left');        // sendevent is used to send click event and also giving the left and top       position of the submit button.       window.setTimeout(function () {       console.log(wpage.url);       wpage.render("submit.png");  // screenshot is saved in submit.png       phantom.exit();    }, 5000);     console.log('element is ' + element);  });
<h3>submitform.html</h3>
The following code shows how to use the <b>submitform.html</b> file.
&lt;html&gt;    &lt;head&gt;      &lt;title&gt;Window 2&lt;/title&gt;   &lt;/head&gt;    &lt;body&gt;      &lt;form action = "submitform.php" method = "post" enctype = "multipart/form-data"          id = "form1"&gt;           &lt;input type = "file" name = "fileToUpload" id = "fileToUpload"&gt;          &lt;input type = "submit" value = "Upload Image" name = "submit"&gt;       &lt;/form&gt;    &lt;/body&gt;     &lt;/html&gt;
Once the form is submitted, it goes to <b>submitform.php</b>.
<h3>submitform.php</h3>
submitform.php is just printing the details of the files.
&lt;?php    print_r($_FILES); ?&gt; 
The above program generates the following <b>output</b>.
Success element is [object Object] http://localhost/tasks/submitform.php 
<h2>Images</h2>
Following are the images for <b>file upload</b> and <b>form submit</b>.
<img src="/phantomjs/images/file_upload.jpg" alt="File Upload">
<img src="/phantomjs/images/form_submit.jpg" alt="Form Submit">
<h2><span class="orange">PhantomJS - Examples</span></h2>
<h2><span class="orange">PhantomJS - Quick Guide</span></h2>
<h2><span class="orange">PhantomJS - Overview</span></h2>
<b>PhantomJS</b> is said to be a <b>headless browser</b> because there is no involvement of browser while executing the JavaScript code. The execution will not be seen in the browser display, but on the command line prompt. The functionalities like <b>CSS Handling, DOM Manipulation, JSON, Ajax, Canvas, SVG,</b> etc., will all be taken care at the command prompt. PhantomJS does not have a GUI and hence, all its execution takes place at the command line.
Using PhantomJS, we can write to a file, read the contents of the file or upload a file, take an screen capture, convert the webpage into a pdf and lots more. With headless browsers, you get all the browser behavior i.e. <b>Cookies, Http Request Methods</b> i.e. <b>GET /POST, Clearing Cookies, Deleting Cookies</b>, etc., <b>Reloading of Page, Navigating to a Different Page</b>.
PhantomJS uses WebKit that has a similar browsing environment like the famous browsers 鈥&lt;93&gt; Google Chrome, Mozilla Firefox, Safari, etc. It also provides a lot of JavaScript API, which helps in taking screenshots, uploading of file, writing to file, reading a file, interacting with the web pages, etc.
PhantomJS does not support Flash or Video, as it requires plugins and it is difficult to support the same on the command line.
<h2>Features of PhantomJS</h2>
Let us now understand the features that PhantomJS offers.
<h3>Page Automation</h3>
PhantomJS allows you to read the page contents with the help of its API. It can help to manipulate the DOM, use external libraries to carry out the task required.
<h3>Screen Capture</h3>
PhantomJS helps in taking a screen capture of a page specified and save the same as an image in various formats like PNG, JPEG, PDF, and GIF. With the help of the screen capture, it can easily help to make sure the web content is fine.
PhantomJS offers properties and methods with the help of which it allows developers to adjust the size of the screenshots and specify the area they want to capture.
<h3>Headless Testing</h3>
PhantomJS helps testing of UI at the command line. While, with the help of a screenshot, it can easily help to find errors in the UI. PhantomJS sometimes cannot help with testing alone. However, it can be wrapped along with other testing libraries like Mocha, Yoeman, etc. You can take the help of PhantomJS to upload a file and submit the form.
PhantomJS can be used to test logins across the sites and make sure the security is not compromised. PhantomJS can be used along with other tools like <b>CasperJS, Mocha, Qunit</b> to make the testing more powerful.
<h3>Network Monitoring</h3>
One of the important features of PhantomJS is its usage to monitor the network connection using the API available. PhantomJS permits the inspection of network traffic; it is suitable to build various analysis on the network behavior and performance.
PhantomJS can be used to collect the data about the performance of the webpage in a live environment. PhantomJS can be used with tools like <b>Yslow</b> to gather performance metrics of any websites.
<h2><span class="orange">PhantomJS - Environment Setup</span></h2>
PhantomJS is a free software and is distributed under the <b>BSD License</b>. It is easy to install and it offers multiple features to execute the scripts. PhantomJS can be easily run on multiple platforms such as Windows, Linux, and Mac.
For downloading PhantomJS, you can go to 鈥&lt;93&gt; <a href="http://phantomjs.org/" target="_blank" rel="nofollow">http://phantomjs.org/</a> and then click on the download option.
<h2>For Windows</h2>
The download page shows you the options for download for different OS. Download the zip file, unpack it and you will get an executable <b>phantom.exe</b>. Set the PATH environment variable to the path of phantom.exe file. Open a new command prompt and type <b>phantomjs 鈥搗</b>. It should give you the current version of PhantomJS that is running.
<h2>For MAC OS X</h2>
Download the PhantomJS zip file meant for MAC OS and extract the content. Once the content is downloaded, move the PhantomJS to 鈥&lt;93&gt; <b>/usr/local/bin/</b>. Execute PhantomJS command i.e. phantomjs 鈥搗 at the terminal and it should give you the version description of PhantomJS.
<h2>Linux 64 bit</h2>
Download the PhantomJS zip file meant for Linux 64 bit and extract the content. Once the content is downloaded, move PhantomJS folder to <b>/usr/local/share/</b> and <b>create a symlink</b> 
sudo mv $PHANTOM_JS /usr/local/share sudo ln -sf /usr/local/share/$PHANTOM_JS/bin/phantomjs /usr/local/bin.
Execute phantomjs 鈥搗 at the terminal and it should give the version of PhantomJS.
<h2>Linux 32 bit</h2>
Download the PhantomJS zip file meant for Linux 32 bit and extract the content. Once the content is downloaded, move the PhantomJS folder to <b>/usr/local/share/</b> and create a symlink 
sudo mv $PHANTOM_JS /usr/local/share sudo ln -sf /usr/local/share/$PHANTOM_JS/bin/phantomjs /usr/local/bin.
Execute phantomjs 鈥搗 at the terminal and it should give the version of PhantomJS.
The PhantomJS source code can also be taken from the git repository by clicking on the following link 鈥&lt;93&gt; <a href="https://github.com/ariya/phantomjs/" target="_blank" rel="nofollow">https://github.com/ariya/phantomjs/</a>
To run scripts in PhantomJS, the command is as follows 
phantomjs jsfile arg1 arg2鈥<a6></a6>
<h2><span class="orange">PhantomJS - Object</span></h2>
In this chapter, we will look at the four important objects PhantomJS. They are as follows 

<li>CookiesEnabled</li>
<li>Cookies</li>
<li>LibraryPath</li>
<li>Version</li>
</ul>
Let us now discuss each of these in detail.
<h2>cookiesEnabled</h2>
It tells whether the cookies are enabled or not. It will return <b>true</b>, if yes; otherwise <b>false</b>.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.cookiesEnabled
<h3>Example</h3>
<b>cookieenabled.js</b>
phantom.addCookie ({     //adding cookie with addcookie property    name: 'c1',    value: '1',    domain: 'localhost' }); console.log("Cookie Enabled value is : "+phantom.cookiesEnabled); phantom.exit();
<h3>Output</h3>
<b>Command</b>  phantomjs cookieenabled.js
Cookie Enabled value is : true 
<h2>Cookies</h2>
It helps to add and set cookies to a domain. It returns an object with all the cookies available for the domain.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.cookies; 
<h3>Example</h3>
<b>Filename: phantomcookie.js</b>
phantom.addCookie ({    name: 'c1',    value: '1',    domain: 'localhost' }); phantom.addCookie ({    name: 'c2',    value: '2',    domain: 'localhost' }); phantom.addCookie ({    name: 'c3',    value: '3',    domain: 'localhost' }); console.log(JSON.stringify(phantom.cookies)); phantom.exit();
<h3>Output</h3>
<b>Command</b>  phantomjs phantomcookie.js
[{"domain":".localhost","httponly":false,"name":"c3","path":"/","secure":false, " value":"3"},{"domain":".localhost","httponly":false,"name":"c2","path":"/","sec u re":false,"value":"2"},{"domain":".localhost","httponly":false,"name":"c1","pat h":"/","secure":false,"value":"1"}]
In the above example, we added some cookies to the localhost domain. We then fetched it using <b>phantom.cookies</b>. It returns an object with all the cookies by using the <b>JSON stringify</b> method to convert the JavaScript object into a string. You can also use <b>foreach</b> to access the name/values of the cookies.
<h2>LibraryPath</h2>
PhantomJS libraryPath stores the script path to be used by the <b>injectJS</b> method.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.libraryPath 
<h3>Example</h3>
Here is an example to find out the version.
var webPage = require('webpage');var page = webPage.create();page.open('http://www.tutorialspoint.com/jquery', function(status) {   if (status === "success") {       page.includeJs('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js ', function() {          if (page.injectJs('do.js')) {             // returnTitle is a function loaded from our do.js file - see below             return returnTitle();          });                  console.log(title);          phantom.exit();       }    } });window.returnTitle = function() {    return document.title;}; 
The above program generates the following <b>output</b>.
Jquery Tutorial
<h2>Version</h2>
It gives the version of the PhantomJS that is running and returns the details in an object. For example: {"major":2,"minor":1,"patch":1}
<h3>Syntax</h3>
Its syntax is as follows 
phantom.version
<h3>Example</h3>
Here is an example to find out the version.
var a = phantom.version;console.log(JSON.stringify(a));console.log(a.major);console.log(a.minor);console.log(a.patch);phantom.exit();
The above program generates the following <b>output</b>.
{"major":2,"minor":1,"patch":1} 2 1 1
In the above example, we have used <b>console.log</b> to print the version. Currently, we are running on version 2. It returns the object with the details shown in the above code block.
<h2><span class="orange">PhantomJS - Methods</span></h2>
PhantomJS is a platform to help execute JavaScript without a browser. To do that, the following methods are used, which help in Adding the Cookie, Deleting, Clearing, Exiting the Script, Injecting JS, etc.
We will discuss more on these PhantomJS methods and their syntax in this chapter. Similar methods i.e. <b>addcookie, injectjs</b> exists on the webpage module, which will be discussed in the subsequent chapters.
PhantomJS exposes the following methods that can help us to execute JavaScript without the browser 

<li>addCookie</li>
<li>clearCookie</li>
<li>deleteCookie</li>
<li>Exit</li>
<li>InjectJS</li>
</ul>
Let us now understand these methods in detail with examples.
<h2>addCookie</h2>
The addcookie method is used to add cookies and store in the data. It is similar to how the browser stores it. It takes a single argument that is an object with all the properties of cookies and the syntax for it looks like shown below 
<h3>Syntax</h3>
Its syntax is as follows 
phantom.addCookie ({    "name" : "cookie_name",     "value" : "cookie_value",    "domain" : "localhost" });
The name, value, domain are mandatory properties to be added to the addcookie function. If any of this property is missing in the cookie objects, this method will fail.

<li><b>name</b>  specifies the name of the cookie.
</li>
<li><b>value</b>  specifies the value of the cookie to be used.
</li>
<li><b>domain</b>  domain to which the cookie will be applied.
</li>
</ul>
<h3>Example</h3>
Here is an example of the <b>addcookie</b> method.
var page = require('webpage').create(),url = 'http://localhost/tasks/a.html'; page.open(url, function(status) {    if (status === 'success') {           phantom.addCookie({   //add name cookie1 with value = 1          name: 'cookie1',          value: '1',          domain: 'localhost'       });       phantom.addCookie({   // add cookie2 with value 2          name: 'cookie2',          value: '2',          domain: 'localhost'       });       phantom.addCookie({   // add cookie3 with value 3          name: 'cookie3',          value: '3',          domain: 'localhost'       });       console.log('Added 3 cookies');       console.log('Total cookies :'+phantom.cookies.length);              // will output the total cookies added to the url.       } else {       console.error('Cannot open file');       phantom.exit(1);    } }); 
<h3>Example</h3>
<b>a.html</b>
&lt;html&gt;   &lt;head&gt;      &lt;title&gt;Welcome to phantomjs test page&lt;/title&gt;   &lt;/head&gt;      &lt;body&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;   &lt;/body&gt;&lt;/html&gt;
The above program generates the following <b>output</b>.
Added 3 cookies Total cookies :3
The code comments are self-explanatory.
<h2>clearCookies</h2>
This method allows deleting all the cookies.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.clearCookies();
This concept works similar to deleting the browser cookies by selecting in the browser menu.
<h3>Example</h3>
Here is an example of the <b>clearCookies</b> method.
var page = require('webpage').create(),url = 'http://localhost/tasks/a.html'; page.open(url, function(status) {    if (status === 'success') {           phantom.addCookie({   //add name cookie1 with value = 1          name: 'cookie1',          value: '1',          domain: 'localhost'       });       phantom.addCookie({   // add cookie2 with value 2          name: 'cookie2',          value: '2',          domain: 'localhost'       });       phantom.addCookie({   // add cookie3 with value 3          name: 'cookie3',          value: '3',          domain: 'localhost'       });       console.log('Added 3 cookies');       console.log('Total cookies :'+phantom.cookies.length);       phantom.clearCookies();       console.log(         'After clearcookies method total cookies :' +phantom.cookies.length);             phantom.exit();        } else {       console.error('Cannot open file');       phantom.exit(1);    } }); 
<b>a.html</b>
&lt;html&gt;   &lt;head&gt;      &lt;title&gt;Welcome to phantomjs test page&lt;/title&gt;   &lt;/head&gt;      &lt;body&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;      &lt;h1&gt;This is a test page&lt;/h1&gt;   &lt;/body&gt;&lt;/html&gt;
The above program generates the following <b>output</b>.
Added 3 cookies Total cookies :3 After clearcookies method total cookies :0 
<h2>deleteCookie</h2>
Delete any cookie in the <b>CookieJar</b> with a 鈥榥ame' property matching cookieName. It will return <b>true</b>, if successfully deleted; otherwise <b>false</b>.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.deleteCookie(cookiename);
Let us understand <b>addcookie, clearcookies</b> and <b>deletecookie</b> with the help of an example.
<h3>Example</h3>
Here is an example to demonstrate the use of deleteCookie method 
<b>File: cookie.js</b>
var page = require('webpage').create(),url = 'http://localhost/tasks/a.html'; page.open(url, function(status) {    if (status === 'success') {           phantom.addCookie({   //add name cookie1 with value = 1          name: 'cookie1',          value: '1',          domain: 'localhost'       });       phantom.addCookie({   // add cookie2 with value 2          name: 'cookie2',          value: '2',          domain: 'localhost'       });      phantom.addCookie({   // add cookie3 with value 3          name: 'cookie3',          value: '3',          domain: 'localhost'       });        console.log('Added 3 cookies');       console.log('Total cookies :'+phantom.cookies.length);             //will output the total cookies added to the url.          console.log("Deleting cookie2");       phantom.deleteCookie('cookie2');             console.log('Total cookies :'+phantom.cookies.length);       phantom.clearCookies();            console.log(         'After clearcookies method total cookies :' +phantom.cookies.length);       phantom.exit();    } else {       console.error('Cannot open file');       phantom.exit(1);    } });
The above program generates the following <b>output</b>.
phantomjs cookie.jsAdded 3 cookiesTotal cookies :3Deleting cookie2Total cookies :2After clearcookies method total cookies :0
<h2>Exit</h2>
The phantom.exit method will exit the script which it had started. It exits the program with return value mentioned. It gives <b>鈥&lt;98&gt;0鈥&lt;99&gt;</b>, if there is no value passed.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.exit(value);
In case you do not add <b>phantom.exit</b>, then the command line assumes that the execution is still on and will not complete.
<h3>Example</h3>
Let us look at an example to understand the use of the <b>exit</b> method.
console.log('Welcome to phantomJs');  // outputs Welcome to phantomJS var a = 1; if (a === 1) {    console.log('Exit 1'); //outputs Exit 1    phantom.exit(); // Code exits. } else {    console.log('Exit 2');    phantom.exit(1); }
The above program generates the following <b>output</b>.
<b>phantomjs exit.js</b>
Welcome to phantomJs Exit 1 
Any piece of code after phantom.exit will not be executed, since phantom.exit is a method to end the script.
<h2>injectJs</h2>
InjectJs is used to add <b>addtionaljs</b> files in phantom. If the file is not found in the current <b>directory librarypath</b>, then the phantom property (phantom.libraryPath) is used as an additional place to track the path. It returns <b>true</b> if the file addition is successful otherwise <b>false</b> for failure, incase if it is not able to locate the file.
<h3>Syntax</h3>
Its syntax is as follows 
phantom.injectJs(filename);
<h3>Example</h3>
Let us look at the following example to understand the use of <b>injectJs</b>.
<b>Filename: inject.js</b>
console.log(鈥淎dded file鈥&lt;9d&gt;); 
<b>File name: addfile.js</b>
var addfile =  injectJs(inject.js);console.log(addfile);phantom.exit();
<h3>Output</h3>
<b>Command</b>  C:\phantomjs\bin&gt;phantomjs addfile.js
Added file // coming from inject.jstrue
In the above example, <b>addfile.js</b> calls the file <b>inject.js</b> using injectJs. When you execute addfile.js, the console.log present in inject.js is shown in the output. It also shows true for addfile variable since the file inject.js was added successfully.
<h2><span class="orange">PhantomJS - Webpage Module Properties</span></h2>
PhantomJS provides quite a lot of properties and methods to help us to interact with the contents inside a webpage.
The require("webpage").create() command creates a webpage object. We will use this object to manipulate the webpage with the help of properties and methods listed below.
var wpage = require("webpage").create();
The following table has the list of all the webpage properties that we are going to discuss.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Properties &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_cangoback_property.htm">canGoBack</a>This property returns <b>true</b> if there is previous page in the navigation history; if not, <b>false</b>.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<a href="/phantomjs/phantomjs_cangoforward_property.htm">canGoForward</a>This property returns true if there is next page in the navigation history; if not, <b>false</b>.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<a href="/phantomjs/phantomjs_cliprect_property.htm">clipRect</a>clipRect is an object with values top, left, width and height and used to take the image capture of the webpage when used by the render() method.
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_content_property.htm">Content</a>This property contains the contents of webpage.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_cookies_property.htm">cookies</a>With cookies, you can set /get the cookies available on the URL. It will also give you the cookies available on the URL and the new cookies set on the page.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<a href="/phantomjs/phantomjs_customheaders_property.htm">customHeaders</a>customHeaders specifies additional HTTP request headers that will be send to server for every request issued by the page.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_event_property.htm">Event</a>It gives long list of events i.e. modifier, keys details.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_focusedframename_property.htm">focusedFrameName</a>Returns the name of the currently focused frame.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_framecontent_property.htm">frameContent</a>This property gives the content of the frame which is active.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_framename_property.htm">frameName</a>Returns the name of the currently focused frame.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_frameplaintext_property.htm">framePlainText</a>This property also gives the contents of the current active frame but only contents without any html tags.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_frametitle_property.htm">frameTitle</a>Gives the title of the active frame.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_frameurl_property.htm">frameUrl</a>This property will give the url of the currently focused frame.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_framescount_property.htm">framesCount</a>Gives the count of the frames present on the page.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_framesname_property.htm">framesName</a>Gives array of frame names.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_librarypath_property.htm">libraryPath</a>This property has the path, which is used by page.inectJs method.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_navigationlocked_property.htm">navigationLocked</a>This property defines whether navigation of the page is allowed or not. If true it will be on current page url and clicking on page to go to next page will not be allowed.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_offlinestoragepath_property.htm">offlineStoragePath</a>This property gives the path where the data is stored using window.localStorage.The path can be changed using --local-storage-path from command line.
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<a href="/phantomjs/phantomjs_offlinestoragequota_property.htm">offlineStorageQuota</a>This property defines the maximum amount of data you can store in window.localStorage.The value is 5242880 bytes which is 5MB.This value can overwritten at command line using the following command --localstorage-quota = size over here.
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<a href="/phantomjs/phantomjs_ownspages_property.htm">ownsPages</a>ownsPages returns true or false if the page opened by the webpage is a child of the webpage.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<a href="/phantomjs/phantomjs_pageswindowname_property.htm">pagesWindowName</a>PagesWindowName will give the names of the windows open using window.open
</td>
</tr>
<tr>
<td class="ts">22</td>
<td>
<a href="/phantomjs/phantomjs_pages_property.htm">pages</a>The pages property will you give array of pages opened in a page using window.open. If the page is closed in url you referring the page will not be considered.
</td>
</tr>
<tr>
<td class="ts">23</td>
<td>
<a href="/phantomjs/phantomjs_papersize_property.htm">paperSize</a>This property gives the size ie dimensions of the webpage when needs to be used to convert the webpage in a pdf format.paperSize contains the dimensions required in an object.
</td>
</tr>
<tr>
<td class="ts">24</td>
<td>
<a href="/phantomjs/phantomjs_plaintext_property.htm">plaintext</a>This property also gives the contents of the current active frame but only contents without any html tags.
</td>
</tr>
<tr>
<td class="ts">25</td>
<td>
<a href="/phantomjs/phantomjs_scrollposition_property.htm">scrollPosition</a>This contains object indicating the scroll position. It gives left and top.
</td>
</tr>
<tr>
<td class="ts">26</td>
<td>
<a href="/phantomjs/phantomjs_settings_property.htm">settings</a>This property will give the settings of the webpage when page.open method is used. Once the page is loaded the changes in settings properties will not create any impact.
</td>
</tr>
<tr>
<td class="ts">27</td>
<td>
<a href="/phantomjs/phantomjs_title_property.htm">title</a>This property will give you the title of the page you are reading.
</td>
</tr>
<tr>
<td class="ts">28</td>
<td>
<a href="/phantomjs/phantomjs_url_property.htm">url</a>This property will give the page url.
</td>
</tr>
<tr>
<td class="ts">29</td>
<td>
<a href="/phantomjs/phantomjs_viewportsize_property.htm">viewportSize</a>This property allows to change the size of the window display. It contains width and height, which you can read or change it as per the needs.
</td>
</tr>
<tr>
<td class="ts">30</td>
<td>
<a href="/phantomjs/phantomjs_windowname_property.htm">windowName</a>Gives the name of the window.
</td>
</tr>
<tr>
<td class="ts">31</td>
<td>
<a href="/phantomjs/phantomjs_zoomfactor_property.htm">zoomFactor</a>This property specifies the zoom factor for render and renderBase64 methods. It helps to zoom a page and take a screen capture if required.
</td>
</tr>
</table>
<h2><span class="orange">PhantomJS - Webpage Module Methods</span></h2>
The Web Page Module has methods for <b>Cookies, Frames, Page Navigation, Reload, Rendering</b> and <b>Uploading of Files</b>.
Following are the methods available on the web page.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Methods &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_addcookie_method.htm">addCookie()</a>addCookie method adds cookies to the page specified.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<b>childFramesCount()</b>This method is deprecated as per <a href="http://phantomjs.org" target="_blank" rel="nofollow">http://phantomjs.org.</a>
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<b>childFramesName()</b>This method is deprecated as per <a href="http://phantomjs.org" target="_blank" rel="nofollow">http://phantomjs.org.</a>
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_clearcookies_method.htm">clearCookies()</a>Will delete all the cookies for the page specified.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_close_method.htm">close()</a>This method is used to close the page and release the memory used. Any of the webpage methods or properties will not work once the close is called.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<b>currentFrameName()</b>This method is deprecated as per <a href="http://phantomjs.org" target="_blank" rel="nofollow">http://phantomjs.org.</a>
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_deletecookie_method.htm">deleteCookie()</a>This will delete a cookie with the name matching with the existing list of cookies present for a given page url.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_evaluateaync_method.htm">evaluateAsync()</a>Evaluate given function asynchronously within the page without blocking current execution. This function helps to execute certain scripts asynchronously.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_evaluatejavascript_method.htm">evaluateJavascript()</a>EvaluateJavaScript helps to execute the function passed to it as a string. Please note the string passed has to be a function only.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_evaluate_method.htm">evaluate()</a>Evaluate will execute the function passed to it. If the function contain console messages it is not displayed directly in the terminal. To display any console messages you need to use onConsoleMessage phantom callback.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_getpage_method.htm">getPage()</a>This will give you the child page that matches the windowname passed in getpage.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_goback_method.htm">goBack()</a>It gives the previous page in navigation history, if only the navigation is not locked.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_goforward_method.htm">goForward()</a>It gives the next page in navigation history, if only the navigation is not locked.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_go_method.htm">go()</a>This method allows you to navigate with the pages.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_includejs_method.htm">includeJs()</a>Includejs executes the external JS file on page and executes the callback function on completion.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_injectjs_method.htm">injectJs()</a>InjectJs includes external script from a specified file into the page. If the file is not available in the current directory, then it used libraryPath for additional search of the file. It returns true if the file is injected, otherwise false.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_openurl_method.htm">openUrl()</a>OpenUrl opens up a webpage. It is similar to open method of PhantomJS. OpenUrl has some additional parameters, which are httpConf, settings and callback functions.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_open_webpage_method.htm">open()</a>Open is used to open up a webpage.
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<a href="/phantomjs/phantomjs_release_method.htm">release()</a>Release will release the memory heap usage for the page. Do not use page instance methods after the release is called. This method is similar to the close method and the usage of it is deprecated. Instead use wpage.close().
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<a href="/phantomjs/phantomjs_reload_method.htm">reload()</a>Reload is used to reload the current page used.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<a href="/phantomjs/phantomjs_renderbase64_method.htm">renderBase64()</a>This method takes the screen capture and gives the image as a string in base46. Renderbase64 supports format like PNG, JPEG and JPG. It does not support gif as of now. You can use clipRect property to define the portion for image capture.
</td>
</tr>
<tr>
<td class="ts">22</td>
<td>
<a href="/phantomjs/phantomjs_renderbuffer_method.htm">renderBuffer()</a>RenderBuffer takes the capture of the webpage to an image buffer, which can be directly sent to the server. Formats supported are PNG, GIF and JPEG.
</td>
</tr>
<tr>
<td class="ts">23</td>
<td>
<a href="/phantomjs/phantomjs_render_method.htm">render()</a>Render helps to take the image buffer and save it as per the format specified.
</td>
</tr>
<tr>
<td class="ts">24</td>
<td>
<a href="/phantomjs/phantomjs_sendevent_method.htm">sendEvent()</a>It is used to send an event to the webpage. They are not dom events. Each of these events are sent to the webpage based on user interaction.
</td>
</tr>
<tr>
<td class="ts">25</td>
<td>
<a href="/phantomjs/phantomjs_setcontent_method.htm">setContent()</a>setcontent will change the page content of the specified url with the contents specified.
</td>
</tr>
<tr>
<td class="ts">26</td>
<td>
<a href="/phantomjs/phantomjs_stop_method.htm">stop()</a>It helps to stop loading of the page.
</td>
</tr>
<tr>
<td class="ts">27</td>
<td>
<b>switchToChildFrame()</b>It is deprecated to use switchToFrame();
</td>
</tr>
<tr>
<td class="ts">28</td>
<td>
<a href="/phantomjs/phantomjs_switchtofocusedframe_method.htm">switchToFocusedFrame()</a>It selects the frame, which is in focus.
</td>
</tr>
<tr>
<td class="ts">29</td>
<td>
<a href="/phantomjs/phantomjs_switchtoframe_method.htm">switchToFrame()</a>Selects frame with the name specified and which is child of current frame.
</td>
</tr>
<tr>
<td class="ts">30</td>
<td>
<a href="/phantomjs/phantomjs_switchtomainframe_method.htm">switchToMainFrame()</a>Selects mainframe i.e. the root window.
</td>
</tr>
<tr>
<td class="ts">31</td>
<td>
<a href="/phantomjs/phantomjs_switchtoparentframe_method.htm">switchToParentFrame()</a>It takes the parent frame of the current child frame.
</td>
</tr>
<tr>
<td class="ts">32</td>
<td>
<a href="/phantomjs/phantomjs_uploadfile_method.htm">uploadFile()</a>This method is used to handle the file upload done using form in html. PhantomJS does not have a direct way to do so using forms the same can be achieved using uploadFile method. It takes html tag selector for file location and the destination where it has to be copied.
</td>
</tr>
</table>
<h2><span class="orange">Webpage Module Events/Callbacks</span></h2>
The callbacks available with the webpage module are described in the following table.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Callbacks &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_onalert.htm">onAlert()</a>This callback is called when there is an alert on the page; the callback takes a string and does not return anything.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<a href="/phantomjs/phantomjs_oncallback.htm">onCallback()</a>OnCallback is used to pass values from webpage to webpage object and it is done using the window.callPhantom() method, which internally invokes the onCallback function.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<a href="/phantomjs/phantomjs_onclosing.htm">onClosing()</a>This is called when the window is closed either by using the page.close() method or the window.close() method.
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_onconfirm.htm">onConfirm()</a>This callback is called when there is a confirmed message called with ok /cancel from the page.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_onconsolemessage.htm">onConsoleMessage()</a>This callback is used when there are console messages used in the webpage. The onConsoleMessage method takes 3 arguments.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<a href="/phantomjs/phantomjs_onerror.htm">onError()</a>It is called when there is JavaScript error. The arguments for onError are msg and stack trace, which is an array.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_onfilepicker.htm">onFilePicker()</a>This is used for upload file the callback is called when user want to upload a file.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_oninitialized.htm">onInitialized()</a>This callback is invoked when the page is called before loading.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_onloadfinished.htm">onLoadFinished()</a>This function is called when the page opened is fully loaded. It has one argument, which tells when loading was a success or a failure.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_onloadstarted.htm">onLoadStarted()</a>This callback is invoked when the page starts loading.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_onnavigationrequested.htm">onNavigationRequested()</a>This callback tells when the navigation event is taking place.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_onpagecreated.htm">onPageCreated()</a>This callback is invoked when a new child window is opened by the page.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_onprompt.htm">onPrompt()</a>This callback is called when a prompt is called by the web page. It takes 2 arguments, message and the answer. The return value is a string.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_onresourceerror.htm">onResourceError()</a>This callback is called when the webpage is not able to upload the file.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_onresourcereceived.htm">onResourceReceived()</a>This callback is called when the resource requested by the page is received.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_onresourcerequested.htm">onResourceRequested()</a>This function is invoked when page requests a resource.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_onresourcetimeout.htm">onResourceTimeout()</a>This callback is called when the requested resource times out, when settings.resourceTimeout is used.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_onurlchanged.htm">onUrlChanged()</a>This is called when the URL changes from the current one using navigation. It has one argument to the call back, which is a new URL targetUrl string.
</td>
</tr>
</table>
<h2><span class="orange">Webpage Child Process Module</span></h2>
The Phantomjs Child process module helps to interact with the sub-processes and talk to them using <b>stdin /stdout/stderr</b>. The child processes can be used for tasks like <b>printing, sending mail</b> or to <b>invoke programs</b> written in another language. To create a child process module, you need references.
For example 
var process = require("child_process");
<h2>Spawn Method</h2>
With the spawn child process, you can subscribe to its <b>stdout</b> and <b>stderr</b> streams to get data real-time.
<h3>Syntax</h3>
Its syntax is as follows 
var spawn = require('child_process').spawn;
<h3>Example</h3>
Let us look at an example of the spawn method.
var process = require("child_process")var spawn = process.spawnvar child = spawn("cmd", ['/c', 'dir']);child.stdout.on("data", function (data) {   console.log("spawnSTDOUT---VALUE:", JSON.stringify(data))})child.stderr.on("data", function (data) {   console.log("spawnSTDERR:", JSON.stringify(data))})child.on("exit", function (code) {   console.log("spawnEXIT:", code)})
<h3>Output</h3>
The above program generates the following output.
spawnSTDOUT---VALUE: " Volume in drive C is OS\r\n"spawnSTDOUT---VALUE: " Volume Serial Number is 7682-9C1B\r\n\r\n Directory of C:\\phantomjs\\bin\r\n\r\n"spawnSTDOUT---VALUE: "20-05-2017  10:01&lt;DIR&gt;          .\r\n20-05-2017  10:01&lt;DIR&gt;          ..\r\n13-05-2017  20:48   12 a,txt.txt\r\n07-05-2017  08:5163 a.js\r\n06-05-2017  16:32           120,232 a.pdf\r\n13-05-2017  20:49 spawnEXIT: 0 
<h2><span class="orange">PhantomJS - File System Module Properties</span></h2>
The File System Module has many APIs to deal with files and directories. You can create/write and delete a file/directory. To start using the file system module you must require a reference to the <b>fs module</b>.
var fs = require('fs');
There are two properties available for file system module: <b>Separator</b> and <b>Working Directory</b>. Let us understand them in detail.
<h2>Separator</h2>
It tells you the separator used for the file paths.

<li>For windows:<b>\</b>
</li>
<li>For Linux: <b>/</b>
</li>
</ul>
<h3>Syntax</h3>
Its syntax is as follows 
fs.seperator
<h3>Example</h3>
var fs = require('fs');console.log(fs.seperator);phantom.exit();
The above program generates the following <b>output</b>.
undefined
<h2>workingDirectory</h2>
The working directory is the directory in which PhantomJS executes.
<h3>Syntax</h3>
Its syntax is as follows 
var fs = require('fs');fs.workingDirectory;
<h3>Example</h3>
var fs = require('fs');console.log(fs.workingDirectory);phantom.exit();
The above program generates the following <b>output</b>.
C:/phantomjs/bin
<h2><span class="orange">PhantomJS - File System Module Methods</span></h2>
The following table has all the methods and their descriptions, which are available on the File System module.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Methods &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<a href="/phantomjs/phantomjs_absolute_method.htm">absolute</a>This method gives the absolute path where PhantomJS runs.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<a href="/phantomjs/phantomjs_changeworkingdirectory_method.htm">changeWorkingDirectory</a>This allows you to change the working directory and returns true, if it succeeds otherwise returns false.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<a href="/phantomjs/phantomjs_copytree_method.htm">copyTree</a>copyTree will copy a directory from one path to another. The first parameter is a source folder and the second parameter is a destination folder.
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<a href="/phantomjs/phantomjs_copy_method.htm">copy</a>This method helps to copy file from one location to another. It takes two parameters. The first parameter is the source file and the second parameter is the file path, where it has to be copied. It will throw an error, if the source or destination file does not exist.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<a href="/phantomjs/phantomjs_exists_method.htm">exists</a>It checks whether the given file path exists in the system. It returns true, if it is present, otherwise false.
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<a href="/phantomjs/phantomjs_isabsolute_method.htm">isAbsolute</a>This method will return true, if the file path is absolute and false, if relative.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<a href="/phantomjs/phantomjs_isdirectory_method.htm">isDirectory</a>isDirectory tells if the given file is a directory or not. It returns true, if directory otherwise false. It gives false in case if the given path does not exist.
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<a href="/phantomjs/phantomjs_isexecutable_method.htm">isExecutable</a>This method will tell if the given file is executable or not. It returns true, if executable, otherwise false.
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<a href="/phantomjs/phantomjs_isfile_method.htm">isFile</a>This gives details whether the filepath given is a file or not. It returns true, if it is a file and false, if it is not.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<a href="/phantomjs/phantomjs_islink_method.htm">isLink</a>This will give you true, if the file path is a symlink, otherwise false.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<a href="/phantomjs/phantomjs_isreadable_method.htm">isReadable</a>It checks if the given file is readable or not. It gives true, if yes and false, if not.
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<a href="/phantomjs/phantomjs_iswritable_method.htm">isWritable</a>It tells whether if a given file is writable. Returns true, if yes, otherwise false.
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<a href="/phantomjs/phantomjs_lastmodified_method.htm">lastModified</a>Gives the details of the last modification done to the file. It tells the date and time of when the file was last modified.
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<a href="/phantomjs/phantomjs_list_method.htm">list</a>It gives all the files present in the directory.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<a href="/phantomjs/phantomjs_makedirectory_method.htm">makeDirectory</a>Creates a new directory.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<a href="/phantomjs/phantomjs_maketree_method.htm">makeTree</a>makeTree creates all necessary folders to be able to form final directories. This will return true, if the creation was successful, otherwise false. If the directory already exists, it will return true.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<a href="/phantomjs/phantomjs_move_method.htm">move</a>It will move the file from one path to another.
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<a href="/phantomjs/phantomjs_open_file_system_method.htm">open</a>It is used to open up the file.
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<a href="/phantomjs/phantomjs_readlink_method.htm">readLink</a>This will return the absolute path of a file or a folder pointed by a symlink (or shortcut on Windows). If the path is not a symlink or shortcut, it will return an empty string.
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<a href="/phantomjs/phantomjs_read_method.htm">read</a>This will read the given file.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<a href="/phantomjs/phantomjs_removedirectory_method.htm">removeDirectory</a>This will remove the given directory.
</td>
</tr>
<tr>
<td class="ts">22</td>
<td>
<a href="/phantomjs/phantomjs_removetree_method.htm">removeTree</a>It will delete all the files and folders from the given folder and finally delete the folder itself. If there is any error while doing this process, it will throw an error 鈥&lt;93&gt; 'Unable to remove directory tree PATH' and hang execution.
</td>
</tr>
<tr>
<td class="ts">23</td>
<td>
<a href="/phantomjs/phantomjs_remove_method.htm">remove</a>It removes the given file.
</td>
</tr>
<tr>
<td class="ts">24</td>
<td>
<a href="/phantomjs/phantomjs_size_method.htm">size</a>It gives the size of the file.
</td>
</tr>
<tr>
<td class="ts">25</td>
<td>
<a href="/phantomjs/phantomjs_touch_method.htm">touch</a>It creates a given file.
</td>
</tr>
<tr>
<td class="ts">26</td>
<td>
<a href="/phantomjs/phantomjs_write_method.htm">write</a>Writes to a given file.
</td>
</tr>
</table>
<h2><span class="orange">PhantomJS - System Module Properties</span></h2>
In this chapter, we will discuss regarding the various System Module Properties of PhantomJS.
<h2>args</h2>
The system module of PhantomJS has different properties, which help to pass arguments, get to know the file that is executed, etc.
The args property basically returns the arguments passed at the command line. You can also pass the page-URL that you want to read. If you want to store the screen-capture pdf-file or upload file, the details can be passed to the command line and can be read using the <b>args</b> property.
Let us find the length and the way to fetch each argument passed to the command line.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system'); system.args;
<h3>Example</h3>
Take a look at the following example to understand how this property works.
var system = require('system');console.log(system.args.length);if (system.args.length&gt;0) {   console.log(JSON.stringify(system.args));}phantom.exit();
The above program generates the following <b>output</b>.
<b>Command</b>  phantomsjs args.js <b>http://localhost/tasks/request.html</b>
2["args.js","http://localhost/tasks/request.html"]
The first value is the name of the file and next value is the URL passed. You can pass more arguments in the command line and fetch the same using <b>system.args</b>.
<h2>env</h2>
The <b>env</b> property returns the details of the system.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system'); system.env;
<h3>Example</h3>
var system = require('system'); console.log(JSON.stringify(system.env)); phantom.exit();
The above program generates the following output.
{"=::":"::\\","=C:":"C:\\phantomjs\\bin","=ExitCode":"00000000","ALLUSERSPROFILE":"C:\\ProgramData","APPDATA":"C:\\Users\\UserName\\AppData\\Roaming","COMPUTERNAME":"X","ComSpec":"C:\\Windows\\system32\\cmd.exe","CommonProgramFiles":"C:\\Program Files (x86)\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files","CommonProgramW6432":"C:\\Program Files\\Common Files","FP_NO_HOST_CHECK":"NO","HOMEDRIVE":"C:","HOMEPATH":"\\Users\\UserName","LOCALAPPDATA":"C:\\Users\\UserName\\AppData\\Local","LOGONSERVER":"\\\\MicrosoftAccount","NUMBER_OF_PROCESSORS":"2","OS":"Windows_NT","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS ;.VBE;.JS;.JSE;.WSF;.WSH;.MSC","PROCESSOR_ARCHITECTURE":"x86","PROCESSOR_ARCHITEW64 32":"AMD64","PROCESSOR_IDENTIFIER":"Intel64 Family 6 Model 58Stepping9,GenuineIntel","PROCESSOR_LEVEL":"6","PROCESSOR_REVISION":"3a09","PROMPT":"$P$G","PSModulePath":"C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\" ,"PUBLIC":"C:\\Users\\Public","Path":"C:\\Program Files\\Dell\\DW WLAN Card;c:\\Program Files (x86)\\Intel\\iCLS Client\\;c:\\Program Files\\Intel\\iCLSClient\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\ \Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) ManagementEngineComponents\\IPT;c:\\ProgramFiles\\WIDCOMM\\BluetoothSoftware\\;c:\\ProgramFiles\\WIDCOMM\\BluetoothSoftware\\syswow64;C:\\ProgramFiles(x86)\\WindowsLive\\Shared;C:\\ProgramFiles\\nodejs\\;C:\\ProgramFiles\\Git\\cmd;C:\\ProgramFiles\\ OpenVPN\\bin;C:\\ProgramFiles(x86)\\Skype\\Phone\\;C:\\Users\\UserName\\AppData\\Roaming\\npm","ProgramData":"C:\\ProgramData","ProgramFiles":"C:\\ProgramFiles(x86)", "ProgramFiles(x86)":"C:\\ProgramFiles(x86)","ProgramW6432":"C:\\ProgramFiles","SESSIONNAME":"Console","SystemDrive":"C:","SystemRoot":"C:\\Windows","TEMP":"C:\\Users\ \Username~1\\AppData\\Local\\Temp","TMP":"C:\\Users\\Username~1\\AppData\\Local\\Temp","USERDOMAIN":"USER","USERDOMAIN_ROAMINGPROFILE":"USER","USERNAME":"X Y","USERPROFILE":"C:\\Users\\X Y","windir":"C:\\Windows"}
<h2>OS</h2>
It returns the details of the operating system used. It returns an object with architecture, name of the OS, and version.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system');system.os;
<h3>Example</h3>
var system = require('system');console.log(JSON.stringify(system.os));phantom.exit();
The above program generates the following output.
{"architecture":"32bit","name":"windows","version":"8.1"}
<h2>pid</h2>
This property returns the process ID.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system');system.pid;
<h3>Example</h3>
Let us look at an example of the <b>pid</b> property.
var system = require('system');console.log(system.pid);phantom.exit();
The above program generates the following output.
2160
<h2>platform</h2>
This property returns the platform we are working on.
<h3>Syntax</h3>
Its syntax is as follows 
var system = require('system');system.platform;
<h3>Example</h3>
var system = require('system');console.log(system.platform);phantom.exit();
The above program generates the following output.
Phantomjs
<h2><span class="orange">PhantomJS - Web Server Module Properties</span></h2>
PhantomJS uses an embedded web server called <b>mongoose</b>. Right now, PhantomJS cannot connect with any other production webserver. With respect to connection, it can deal with 10 connections at a time and more than 10 requests will be waiting in a queue.
To start a webserver, we need to use the following syntax 
var webserver = require (鈥榳ebserver鈥&lt;99&gt;);
Let us understand the <b>Port</b> property, which is used to listen to the requests that are sent to the webserver.
<h2>port</h2>
The Port property for a webserver is used to listen to the request that are sent to it.
<h3>Syntax</h3>
Its syntax is as follows 
var server = require('webserver').create();var listening = server.listen(port, function (request, response) {});
<h3>Example</h3>
Let us take an example to understand how the <b>port</b> property works.
var webserver = require('webserver'); var server = webserver.create(); var service = server.listen(8080,function(request,response){  }); if(service) console.log("server started - http://localhost:" + server.port); 
The above program generates the following output.
server started - http://localhost:8080
<h2><span class="orange">PhantomJS - Web Server Module Methods</span></h2>
In this chapter, we will discuss regarding the various methods of the Web Server Module of PhantomJS.
<h2>close</h2>
The <b>close</b> method is used to close the webserver.
<h3>Syntax</h3>
Its syntax is as follows 
var server = require('webserver').create();server.close();
<h3>Example</h3>
The following example shows how you can use the <b>close</b> method.
var webserver = require('webserver');var server = webserver.create();var service = server.listen(8080,function(request,response){});if(service) console.log("server started - http://localhost:" + server.port);console.log(server.port);server.close();console.log(server.port);
The above program generates the following <b>output</b>.
server started - http://localhost:8080 8080
Here, we have consoled <b>server.port</b> after closing the server. Hence, it will not respond, as the webserver is already closed.
<h2>listen</h2>
The <b>server.listen</b> method takes the port and callback function with two arguments, which are 鈥&lt;93&gt; <b>Request Object</b> and <b>Response Object</b>.
The <b>Request Object</b> contains the following properties 

<li><b>Method</b>  This defines the method GET /POST.
</li>
<li><b>URL</b>  This displays the requested URL.
</li>
<li><b>httpVersion</b>  This displays the actual http version.
</li>
<li><b>Headers</b>  This displays all the headers with key value pairs.
</li>
<li><b>Post</b>  Request body applicable only for the post method.
</li>
<li><b>postRaw</b>  If the Content-Type header is set to 'application/x-www-formurlencoded', the original content of the post will be stored in this extra property (postRaw) and then that post will be automatically updated with a URL-decoded version of the data.
</li>
</ul>
The <b>Response Object</b> contains the following properties 

<li><b>Headers</b>  Has all the HTTP headers as key-value pairs. It should be set before calling write for the first time.
</li>
<li><b>SetHeader</b>  This sets a specific header.
</li>
<li><b>Header (name)</b>  It returns the value of the given header.
</li>
<li><b>StatusCode</b>  It sets the returned HTTP status code.
</li>
<li><b>SetEncoding (encoding)</b>  This is used to convert data given to write(). By default, data will be converted to UTF-8. Indicate "binary" if data is a binary string. Not required if data is a Buffer (e.g. from page.renderBuffer).
</li>
<li><b>Write (data)</b>  It sends data for the response body. Can be called multiple times.
</li>
<li><b>WriteHead (statusCode, headers)</b>  It sends a response header to the request. The status code is a 3-digit HTTP status code (e.g. 404). The last arguments and headers are the response headers.
</li>
<li><b>Close</b>  It closes the http connection.
</li>
<li><b>CloseGracefully</b>  It is similar to close(), but it makes sure the response headers have been sent first.
</li>
</ul>
<h3>Syntax</h3>
Its syntax is as follows 
var server = require('webserver').create(); var listening = server.listen(8080, function (request, response) {} 
<h3>Example</h3>
Let us take an example to understand how the <b>listen</b> method works.
var page = require('webpage').create(); var server = require('webserver').create(); var port = 8080; var listening = server.listen(8080, function (request, response) {    console.log("GOT HTTP REQUEST");    console.log(JSON.stringify(request, null, 4));       // we set the headers here    response.statusCode = 200;    response.headers = {"Cache": "no-cache", "Content-Type": "text/html"};      // the headers above will now be sent implictly    // now we write the body    response.write("&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcone to Phantomjs&lt;/title&gt;&lt;/head&gt;");    response.write("&lt;body&gt;&lt;p&gt;Hello World&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;");    response.close(); }); if (!listening) {    console.log("could not create web server listening on port " + port);    phantom.exit(); } var url = "http://localhost:" + port + "/foo/response.php"; console.log("sending request to :" +url); page.open(url, function (status) {    if (status !== 'success') {       console.log('page not opening');    } else {       console.log("Getting response from the server:");       console.log(page.content);    }       phantom.exit(); });
The above program generates the following <b>output</b>.
sending request to :http://localhost:8080/foo/response.php GOT HTTP REQUEST {    "headers": {      "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",       "Accept-Encoding": "gzip, deflate",       "Accept-Language": "en-IN,*",       "Connection": "Keep-Alive",       "Host": "localhost:8080",       "User-Agent": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1          (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"    },    "httpVersion": "1.1",    "method": "GET",    "url": "/foo/response.php" } Getting response from the server: &lt;html&gt;&lt;head&gt;&lt;title&gt;Welcone to Phantomjs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;Hello World&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; 
<h2><span class="orange">PhantomJS - Command Line Interface</span></h2>
PhantomJS can be executed using the keyword "phantomjs" and the name of the file. For example, "phantomjs file.js".
You can also pass arguments into "file.js" as follows 
phantomjs [options] file.js arg1 arg2 ...
Let us go through some of the options available at the command line.
<table class="table table-bordered">
<tr>
<th style="text-align:center;">S.No</th>
<th style="text-align:center;">Option &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td>
<b>--help or 鈥揾</b>
Will display all the command line options. Halts immediately and will not run the script passed.
</td>
</tr>
<tr>
<td class="ts">2</td>
<td>
<b>--version or 鈥搗</b>
Prints the version of PhantomJS running. This will halt the execution of script to be run.
</td>
</tr>
<tr>
<td class="ts">3</td>
<td>
<b>--debug[true|false]</b>
Prints warnings and debug messages. By default, it is set to false. You can also use [yes|no].
</td>
</tr>
<tr>
<td class="ts">4</td>
<td>
<b>--cookies-file = /path/to/cookies.txt</b>
File name to store persistent cookies.
</td>
</tr>
<tr>
<td class="ts">5</td>
<td>
<b>--diskcache=[true|false]</b>
Enables disk cache. It also takes values [yes|no]
</td>
</tr>
<tr>
<td class="ts">6</td>
<td>
<b>--disk-cahe-path</b>
Path for disk cache.
</td>
</tr>
<tr>
<td class="ts">7</td>
<td>
<b>--ignore-sslerrors=[true|false]</b>
Ignore SSL errors. For example 鈥&lt;93&gt; Expired or self-signed certificate errors. Default is false. It also takes values [yes|no].
</td>
</tr>
<tr>
<td class="ts">8</td>
<td>
<b>--loadimages=[true|false]</b>
Loads all inline images. Default value is true. It also takes [yes|no].
</td>
</tr>
<tr>
<td class="ts">9</td>
<td>
<b>--local-storagepath=/some/path</b>
Path to save LocalStorage content and WebSQL content.
</td>
</tr>
<tr>
<td class="ts">10</td>
<td>
<b>--local-storagequota=number</b>
Maximum size to allow for data.
</td>
</tr>
<tr>
<td class="ts">11</td>
<td>
<b>--local-url-access</b>
Allows use of 鈥榝ile:///鈥&lt;99&gt; URLs (default is true).
</td>
</tr>
<tr>
<td class="ts">12</td>
<td>
<b>--local-to-remote-urlaccess=[true|false]</b>
Allows local content to access remote URL. Default is false. It also takes values [yes|no].
</td>
</tr>
<tr>
<td class="ts">13</td>
<td>
<b>--max-disk-cachesize=size</b>
Limits the size of disk cache (in KB)
</td>
</tr>
<tr>
<td class="ts">14</td>
<td>
<b>--offline-storage-path</b>
Specifies location for offline storage.
</td>
</tr>
<tr>
<td class="ts">15</td>
<td>
<b>--offline-storage-quota</b>
Sets the maximum size of the offline storage in KB.
</td>
</tr>
<tr>
<td class="ts">16</td>
<td>
<b>--outputencoding=encoding</b>
Sets the encoding used for terminal output. Default is utf-8.
</td>
</tr>
<tr>
<td class="ts">17</td>
<td>
<b>--proxy=address:port</b>
Specifies the proxy server to be used (For example 鈥&lt;93&gt; proxy=192.168.1.1:8080)
</td>
</tr>
<tr>
<td class="ts">18</td>
<td>
<b>--proxytype=[http|socks5|none]</b>
Specifies the type of proxy server (default is http)
</td>
</tr>
<tr>
<td class="ts">19</td>
<td>
<b>--proxy-auth</b>
Authentication information for the proxy. For example 鈥&lt;93&gt;
--proxy-auth=username:password
</td>
</tr>
<tr>
<td class="ts">20</td>
<td>
<b>--scriptencoding=encoding</b>
Sets the encoding used for the script. Default is utf8.
</td>
</tr>
<tr>
<td class="ts">21</td>
<td>
<b>--script-language</b>
Sets the script language.
</td>
</tr>
</table>
<h2><span class="orange">PhantomJS - Screen Capture</span></h2>
PhantomJS is very helpful in taking a screenshot of a webpage and converting a webpage into a PDF. We have given here a simple example to demonstrate how it works.
<h2>Example</h2>
var page = require('webpage').create();page.open('http://phantom.org/',function(status){   page.render('phantom.png');   phantom.exit();});
Execute the above program and the output will be saved as <b>phantom.png</b>.
<img src="/phantomjs/images/optimal_solution.jpg" alt="Optimal Solution"><h2>Convert Webpages into PDFs</h2>
PhantomJS also helps to convert webpages into PDFs with header and footer added to it. Take a look at the following example to understand how it works.
var wpage = require('webpage').create(); var url = "https://en.wikipedia.org/wiki/Main_Page"; var output = "test.pdf"; wpage.paperSize = {    width: screen.width+'px',    height: '1500px',       margin: {      'top':'50px',       'left':'50px',       'rigtht':'50px'    },    orientation:'portrait',    header: {       height: "1cm",       contents: phantom.callback(function(pageNumber, nPages) {          return "&lt;h5&gt;Header &lt;b&gt;" + pageNumber + " / " + nPages + "&lt;/b&gt;&lt;/h5&gt;";       })    },    footer: {       height: "1cm",       contents: phantom.callback(function(pageNumber, nPages) {            return "&lt;h5&gt;Footer &lt;b&gt;" + pageNumber + " / " + nPages + "&lt;/b&gt;&lt;/h5&gt;";       })    } } wpage.open(url, function (status) {    if (status !== 'success') {       console.log('Page is not opening');       phantom.exit();    } else {       wpage.render(output);       phantom.exit();        } });
The above program generates the following <b>output</b>.
The above will convert the page into pdf and will be saved in test.pdf
<h2>Convert a Canvas to an Image</h2>
Phantomjs can easily convert a Canvas to an Image. Take a look at the following example to understand how it works.
var page = require('webpage').create(); page.content = '&lt;html&gt;&lt;body&gt;&lt;canvas id="surface" width="400" height="400"&gt;&lt;/canvas&gt;&lt;/body&gt;&lt;/html&gt;'; page.evaluate(function() {   var context,e1;    el = document.getElementById('surface');       context = el.getContext('2d');    context.font = "30px Comic Sans MS";    context.fillStyle = "red";    context.textAlign = "center";    context.fillText("Welcome to PhantomJS ", 200, 200);       document.body.style.backgroundColor = 'white';    document.body.style.margin = '0px'; }); page.render('canvas.png'); phantom.exit(); 
The above program generates the following <b>output</b>.
<img src="/phantomjs/images/welcome_phantomjs.jpg" alt="Welcome Phantomjs"><h2><span class="orange">PhantomJS - Page Automation</span></h2>
PhantomJS, with the help of its webpage module APIs, can manipulate webpages and perform operations such as DOM manipulation, clicking on buttons, etc.
<h2>Fetch Images from a Page</h2>
The following program shows how you can use PhantomJS to fetch images from a page.
var wpage = require('webpage').create();wpage.onConsoleMessage = function(str) {   console.log(str.length);}wpage.open("http://phantomjs.org", function(status) {   console.log(status);   var element = wpage.evaluate(function() {      var imgdata =  document.querySelectorAll('img');      var imgsrc = [];            if (imgdata) {         for (var i in imgdata) {            imgsrc.push(imgdata[0].src);         }      }      return imgsrc;   });   console.log(JSON.stringify(element));});
The above program generates the following <b>output</b>.
Success ["http://phantomjs.org/img/phantomjslogo.png","http://phantomjs.org/img/phantom js-logo.png","http://phantomjs.org/img/phantomjslogo.png","http://phantomjs.org /img/phantomjs-logo.png"]
It is possible to include external JavaScript in a page using the <b>injectJS webpage method</b>. There are many properties and methods, which can help page automation and do many other things. You can refer the webpage module where the properties and methods are explained in detail.
<h2><span class="orange">PhantomJS - Network Monitoring</span></h2>
With help of PhantomJS, we can monitor the network and validate the behavior and performance of a particular webpage. There are callbacks in PhantomJS, i.e., <b>onResourceRequested</b> and <b>onResourceReceived</b>, which help in monitoring the traffic for a given page.
<h2>Example</h2>
The following example shows how you can use PhantomJS to monitor traffic for a given page.
function createHAR(address, title, startTime, resources) {        // this function formats the data which is coming from       onresourcerequest and onresourcereceived    var entries = [];       resources.forEach(function (resource) {       var request = resource.request, startReply = resource.startReply,          endReply = resource.endReply;              if (!request || !startReply || !endReply) {          return;       }              // Exclude Data URI from HAR file because       // they aren't included in specification       if (request.url.match(/(^data:image\/.*)/i)) {          return;       }        entries.push ({          startedDateTime: request.time.toISOString(),          time: endReply.time - request.time,                   request: {             method: request.method,             url: request.url,             httpVersion: "HTTP/1.1",             cookies: [], headers: request.headers,             queryString: [],             headersSize: -1,             bodySize: -1          },          response: {             status: endReply.status,             statusText: endReply.statusText,             httpVersion: "HTTP/1.1",             cookies: [],             headers: endReply.headers,             redirectURL: "",             headersSize: -1,             bodySize: startReply.bodySize,                         content: {                size: startReply.bodySize,                mimeType: endReply.contentType             }          },          cache: {},          timings: {             blocked: 0,             dns: -1,             connect: -1,             send: 0,             wait: startReply.time - request.time,             receive: endReply.time - startReply.time,             ssl: -1          },          pageref: address       });    });     return {       log: {          version: '1.2', creator: {             name: "PhantomJS",             version: phantom.version.major + '.' + phantom.version.minor +                '.' + phantom.version.patch          },          pages: [{             startedDateTime: startTime.toISOString(),             id: address,             title: title,                         pageTimings: {                onLoad: page.endTime - page.startTime             }          }],          entries: entries       }    }; }  var page = require('webpage').create(), system = require('system'); var fs = require('fs');   if (system.args.length === 1) {    console.log('Usage: netsniff.js &lt;some URL&gt;');    phantom.exit(1); } else {    page.address = system.args[1];    page.resources = [];       page.onLoadStarted = function () {  // called when page is loaded       page.startTime = new Date();    };     page.onResourceRequested = function (req) {        // called when any files are requested from given page url       page.resources[req.id] = {          request: req,          startReply: null,          endReply: null       };    };     page.onResourceReceived = function (res) {        //called when any files are received.       if (res.stage === 'start') {          page.resources[res.id].startReply = res;       }       if (res.stage === 'end') {          page.resources[res.id].endReply = res;       }    };     page.open(page.address, function (status) {  // open given page url       var har;             if (status !== 'success') {          console.log('FAIL to load the address');          phantom.exit(1);       } else {          page.endTime = new Date();                   page.title = page.evaluate(function () { // gets the page title             return document.title;          });                      har = createHAR(page.address, page.title, page.startTime, page.resources);                    // calls the function createHAR with page url, starttime, and page resources.          // console.log(JSON.stringify(har, undefined, 4));          fs.write('log.txt', JSON.stringify(har, undefined, 4), 'w');                    // logs are collected in log.txt file.          phantom.exit();       }    }); } <h2>Example of log.txt given to HAR preview</h2>
{    "log": {       "version": "1.2",       "creator": {          "name": "PhantomJS",          "version": "2.1.1"       },       "pages": [          {             "startedDateTime": "2017-05-21T13:41:21.824Z",             "id": "http://www.sample.com",             "title": "Free Sample Products 鈥&lt;93&gt; Sample.com &amp;Gt; Free Samples,                Free Product Samples, Product Test Marketing",             "pageTimings": {                "onLoad": 11081             }          }       ],       "entries": [          {             "startedDateTime": "2017-05-21T13:41:21.815Z",             "time": 1999,                         "request": {                "method": "GET",                "url": "http://www.sample.com/",                "httpVersion": "HTTP/1.1",                "cookies": [],                               "headers": [                   {                      "name": "Accept",                      "value": "text/html,application/xhtml+xml,                        application/xml;q = 0.9,*/*;q = 0.8"                   },                                     {                      "name": "User-Agent",                      "value": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1                         (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"                    }                ],                               "queryString": [],                "headersSize": -1,                "bodySize": -1             },             "response": {                "status": 301,                "statusText": "Moved Permanently",                "httpVersion": "HTTP/1.1",                "cookies": [],                               "headers": [                   {                      "name": "Date",                      "value": "Sun, 21 May 2017 13:41:25 GMT"                   },                                     {                      "name": "Server",                      "value": "Apache/2.2.14 (Ubuntu)"                   },                                     {                      "name": "Location",                      "value": "http://sample.com//"                   },                                     {                      "name": "Vary",                      "value": "Accept-Encoding"                   },                                     {                      "name": "Content-Encoding",                      "value": "gzip"                   },                                     {                      "name": "Keep-Alive",                      "value": "timeout = 15, max = 100"                   },                                    {                      "name": "Connection",                      "value": "Keep-Alive"                   },                                     {                      "name": "Content-Type",                      "value": "text/html; charset = iso-8859-1"                   }                ],                 "redirectURL": "",                "headersSize": -1,                "bodySize": 307,                               "content": {                   "size": 307,                   "mimeType": "text/html; charset = iso-8859-1"                }             },                         "cache": {},             "timings": {                "blocked": 0,                "dns": -1,                "connect": -1,                "send": 0,                "wait": 1999,                "receive": 0,                "ssl": -1             },             "pageref": "http://www.sample.com"          },       ]         {          "startedDateTime": "2017-05-21T13:41:24.898Z",          "time": 885,                   "request": {             "method": "GET",             "url": "http://sample.com/",             "httpVersion": "HTTP/1.1",             "cookies": [],                         "headers": [                {                   "name": "Accept",                   "value": "text/html,application/xhtml+xml,                     application/xml;q = 0.9,*/*;q = 0.8"                },                               {                   "name": "User-Agent",                   "value": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1                      (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"                }             ],             "queryString": [],             "headersSize": -1,             "bodySize": -1          },          "response": {             "status": 200,             "statusText": "OK",             "httpVersion": "HTTP/1.1",             "cookies": [],                         "headers": [                {                   "name": "Date",                   "value": "Sun, 21 May 2017 13:41:27 GMT"                },                               {                   "name": "Server",                   "value": "Apache/2.2.14 (Ubuntu)"                },                               {                   "name": "X-Powered-By",                   "value": "PHP/5.3.2-1ubuntu4.29"                },                               {                  "name": "X-Pingback",                   "value": "http://sample.com/xmlrpc.php"                },                               {                   "name": "Link",                   "value": "&lt;http://sample.com/wp-json/&gt;;                      rel = \"https://api.w.org/\", &lt;http://wp.me/P6Jj5H-4&gt;;                      rel = shortlink"                },                               {                   "name": "Vary",                   "value": "Accept-Encoding"                 },                               {                   "name": "Content-Encoding",                  "value": "gzip"                },               {                   "name": "Keep-Alive",                  "value": "timeout = 15, max = 99"               },               {                  "name": "Connection",                  "value": "Keep-Alive"               },               {                   "name": "Content-Type",                  "value": "text/html; charset = UTF-8"               }            ],            "redirectURL": "",            "headersSize": -1,            "bodySize": 1969,            "content": {               "size": 1969,               "mimeType": "text/html; charset = UTF-8"            }         },         "cache": {},         "timings": {            "blocked": 0,            "dns": -1,            "connect": -1,            "send": 0,            "wait": 869,            "receive": 16,            "ssl": -1         },         "pageref": http://www.sample.com      },      {         "startedDateTime": "2017-05-21T13:41:25.767Z",         "time": 388,         "request": {            "method": "GET",            "url": "http://sample.com/wpcontent/themes/samplecom/style.css",            "httpVersion": "HTTP/1.1",            "cookies": [],            "headers": [               {                  "name": "Accept",                  "value": "text/css,*/*;q = 0.1"               },               {                  "name": "Referer",                  "value": "http://sample.com/"               },               {                  "name": "User-Agent",                  "value": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1                      (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1"               }            ],            "queryString": [],            "headersSize": -1,            "bodySize": -1         },         "response": {            "status": 200,            "statusText": "OK",            "httpVersion": "HTTP/1.1",            "cookies": [],            "headers": [               {                  "name": "Date",                  "value": "Sun, 21 May 2017 13:41:27 GMT"               },               {                  "name": "Server",                  "value": "Apache/2.2.14 (Ubuntu)"               },               {                  "name": "Last-Modified",                  "value": "Fri, 22 Apr 2011 00:32:22 GMT"               },               {                  "name": "ETag",                  "value": "\"e1d7-1836-4a176fdbbd180\""               },               {                  "name": "Accept-Ranges",                  "value": "bytes"               },               {                  "name": "Vary",                  "value": "Accept-Encoding"               },               {                  "name": "Content-Encoding",                  "value": "gzip"               },               {                  "name": "Keep-Alive",                  "value": "timeout = 15, max = 98"               },               {                  "name": "Connection",                  "value": "Keep-Alive"               },               {                  "name": "Content-Type",                  "value": "text/css"               }            ],            "redirectURL": "",            "headersSize": -1,            "bodySize": 3174,                        "content": {               "size": 3174,               "mimeType": "text/css"            }         },         "cache": {},         "timings": {            "blocked": 0,            "dns": -1,            "connect": -1,            "send": 0,            "wait": 388,            "receive": 0,            "ssl": -1         },                  "pageref": "http://www.sample.com"      }   }}
<h2>Output</h2>
The above program generates the following output.
<img src="/phantomjs/images/har_preview.jpg" alt="Har Preview">All the logs are collected in a <b>.txt file</b> and later, the same is converted as above using the HAR preview, for example, (<a href="http://www.softwareishard.com/har/viewer/" target="_blank" rel="nofollow">http://www.softwareishard.com/har/viewer/)</a>
<h2><span class="orange">PhantomJS - Testing</span></h2>
<b>PhantomJS</b> has a lot of API for a webpage, which gives all the details. PhantomJS can be used to for testing like getting the content of a page, taking screen share, converting page into a pdf, etc. There are many popular testing libraries in the market, which can be used along with PhantomJS and can be used for testing.
Some of the popular frameworks that can work with PhantomJS are as follows 

<li>Mocha</li>
<li>Jasmine</li>
<li>Qunit</li>
<li>Hiro</li>
<li>Laika</li>
<li>Buster.JS</li>
<li>WebDriver</li>
</ul>
<h2>Example 鈥&lt;93&gt; PhantomJS with Qunit</h2>
(function () {        var url, timeout,args = require('system').args, page = require('webpage').create();    url = args[1];    timeout = parseInt(10, 10);       page.onConsoleMessage = function (msg) {        //prints all the console messages       console.log(msg);    };    page.onInitialized = function () {  // called when page is initialized       page.evaluate(callqunit);    };    page.onCallback = function (message) { // called from        var result, failed;             if (message) {           if (message.name === 'QUnit.done') {             result = message.data;             failed = !result || !result.total || result.failed;                          if (!result.total) {                console.error('No tests were executed');             }             pageexit(failed ? 1 : 0);          }       }    };     page.open(url, function (status) { // opening page        if (status !== 'success') {          console.error('Unable to access network: ' + status);          pageexit(1);       } else {          var checkqunit = page.evaluate(function () {             //evaluating page and chcking if qunit object                is present on the given page url             return (typeof QUnit === 'undefined' || !QUnit);          });                   if (checkqunit) {             console.error('Qunit scripts are not present on the page');             pageexit(1);          }                               //timeout of 10seconds is used otherwise message from console will get printed.          setTimeout(function () {             console.error('The specified timeout of ' + timeout + ' seconds has expired.                Aborting...');             pageexit(1);          }, timeout * 1000);                 }    });     function callqunit() {
<h2>qunit.html</h2>
&lt;!DOCTYPE html&gt; &lt;html&gt;    &lt;head&gt;       &lt;meta charset = "utf-8"&gt;       &lt;meta name = "viewport" content = "width = device-width"&gt;       &lt;title&gt;QUnit Example&lt;/title&gt;       &lt;link rel = "stylesheet" href = "https://code.jquery.com/qunit/qunit-2.3.2.css"&gt;    &lt;/head&gt;    &lt;body&gt;       &lt;div id = "qunit"&gt;&lt;/div&gt;       &lt;div id = "qunit-fixture"&gt;&lt;/div&gt;       &lt;script src = "https://code.jquery.com/qunit/qunit-2.3.2.js"&gt;&lt;/script&gt;    &lt;/body&gt;    &lt;/html&gt; 
<h2>Output</h2>
<b>Command</b>  phantomjs qunit.js http://localhost/tasks/qunit.html
The above program generates the following output.
{"passed":3,"failed":2,"total":5,"runtime":23}Time taken is 23ms to run 5 tests.3 passed, 2 failed.
<h2><span class="orange">PhantomJS - REPL</span></h2>
<b>REPL</b> stands for <b>Read Eval Print Loop</b>. In PhantomJS, REPL is an interactive mode to test the JavaScript code. You can do the same thing, which is done in Google Chrome Inspector or Firebug to execute some piece of code directly on the console. REPL returns you the same platform to execute the scripts.
The typed command is sent to the interpreter for immediate interpretation (EVAL) and to provide feedback (PRINT). Enter <b>PhantomJS</b> in the command line and it will take you to the interactive mode, where you can execute your code directly.
<h2>Syntax</h2>
Its syntax is as follows 
Phantomjs
<h2>Example</h2>
The following example demonstrates how REPL works in PhantomJS.
phantomjs&gt; console.log("Welcome to phantomjs");Welcome to phantomjsUndefinedphantomjs&gt; window.navigator {   "appCodeName": "Mozilla",   "appName": "Netscape",   "appVersion": "5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1 (KHTML, like Gecko)      PhantomJS/2.1.1 Safari/538.1",   "cookieEnabled": true,   "language": "en-IN",   "mimeTypes": {      "length": 0   },   "onLine": false,   "platform": "Win32",   "plugins": {      "length": 0   },   "product": "Gecko   "productSub": "20030107",   "userAgent": "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/538.1 (KHTML, like Gecko)      PhantomJS/2.1.1 Safari/538.1",   "vendor": "Apple Computer, Inc.",   "vendorSub": ""}phantomjs&gt;To find the versionphantomjs&gt; phantom.version {   "major": 2,   "minor": 1,   "patch": 1}phantomjs&gt;
Each command is executed and the result is displayed. Use CTRL+C, CTRL+D or <b>phantom.exit()</b> to come out of the interactive mode.
Use the <b>up/down</b> arrow keys to listen to the previously typed commands.
There is another feature called <b>autocompletion</b>, which helps to remember the command. Just type "phantom" and hit the "Tab" button to get a list of available commands you can execute.
<h2>Output</h2>
The above program generates the following output.
phantomjs&gt; phantom.→| phantomjs&gt; phantom.cookies→| phantomjs&gt; phantom.exit→| phantomjs&gt; phantom.version→|
<h2><span class="orange">PhantomJS - Examples</span></h2>
In this chapter, we are providing a few more practical examples to understand some important features of PhantomJS.
<h2>Example 1 - Find the Page Speed</h2>
In this example, we will use PhantomJS to find the <b>page speed</b> for any given page URL.
var page = require('webpage').create(),    system = require('system'),    t, address;  if (system.args.length === 1) {    console.log('Usage: loadspeed.js &lt;some URL&gt;');    phantom.exit(1); } else {    t = Date.now();    address = system.args[1];       page.open(address, function (status) {       if (status !== 'success') {          console.log('FAIL to load the address');       } else {          t = Date.now() - t;                   console.log('Page title is ' + page.evaluate(function () {             return document.title;          }));          console.log('Loading time ' + t + ' msec');       }       phantom.exit();    }); }
The above program generates the following <b>output</b>.
<b>Command</b>  phantomjs pagespeed.js <a href="http://www.google.com" target="_blank" rel="nofollow">http://www.google.com</a>
Page title is Google Loading time 1396 msec 
<h2>Example 2 - Send a Click Event to a Page</h2>
In the following example, we will use PhantomJS to send a <b>click event</b> to a page.
var page = require('webpage').create(); page.onConsoleMessage = function(str) {    console.log(str); } page.open('http://phantomjs.org/api/phantom/', function(status) {    page.render('beforeclick.png');    console.log(page.url);       var element = page.evaluate(function() {         return document.querySelector('img[src = "http://phantomjs.org/img/phantomjslogo.png"]');    });    page.sendEvent('click', element.offsetLeft, element.offsetTop, 'left');       window.setTimeout(function () {       console.log(page.url);       page.render('afterclick.png');       phantom.exit();    }, 5000);    console.log('element is ' + element); }); 
The above program generates the following <b>output</b>.
http://phantomjs.org/api/phantom/ element is [object Object] http://phantomjs.org/
Our program will create the following two <b>png</b> images in the <b>bin</b> folder. These two images show the difference before and after the execution of the above program.
<img src="/phantomjs/images/before_click.jpg" alt="Before Click">
<img src="/phantomjs/images/optimal_solution.jpg" alt="Optimal Solution"><h2>Example 3 - Submit a Form</h2>
The following example shows how to submit a form using PhantomJS.
var wpage = require('webpage').create();  wpage.open("http://localhost/tasks/submitform.html", function(status) {    console.log(status);    wpage.uploadFile('input[name = fileToUpload]', 'output.png');    wpage.render("sform.png");        var element = wpage.evaluate(function() {         return document.querySelector('input[type = "submit"]');         // getting details of submit button using queryselector.    });    wpage.sendEvent('click', element.offsetLeft, element.offsetTop, 'left');        // sendevent is used to send click event and also giving the left and top       position of the submit button.       window.setTimeout(function () {       console.log(wpage.url);       wpage.render("submit.png");  // screenshot is saved in submit.png       phantom.exit();    }, 5000);     console.log('element is ' + element);  });
<h3>submitform.html</h3>
The following code shows how to use the <b>submitform.html</b> file.
&lt;html&gt;    &lt;head&gt;      &lt;title&gt;Window 2&lt;/title&gt;   &lt;/head&gt;    &lt;body&gt;      &lt;form action = "submitform.php" method = "post" enctype = "multipart/form-data"          id = "form1"&gt;           &lt;input type = "file" name = "fileToUpload" id = "fileToUpload"&gt;          &lt;input type = "submit" value = "Upload Image" name = "submit"&gt;       &lt;/form&gt;    &lt;/body&gt;     &lt;/html&gt;
Once the form is submitted, it goes to <b>submitform.php</b>.
<h3>submitform.php</h3>
submitform.php is just printing the details of the files.
&lt;?php    print_r($_FILES); ?&gt; 
The above program generates the following <b>output</b>.
Success element is [object Object] http://localhost/tasks/submitform.php 






<script src='https://williamkpchan.github.io/LibDocs/readbook.js'></script>
</pre></body></html>